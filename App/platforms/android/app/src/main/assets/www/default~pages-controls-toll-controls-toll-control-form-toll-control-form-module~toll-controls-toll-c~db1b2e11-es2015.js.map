{"version":3,"sources":["./src/app/services/utils/date.service.ts","./src/app/pages/controls/toll-controls/toll-control-form/toll-control-form.page.ts","./src/app/pages/controls/toll-controls/toll-control-form/toll-control-form.page.html","./src/app/services/v1/toll-control.service.ts"],"names":[],"mappings":"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","file":"default~pages-controls-toll-controls-toll-control-form-toll-control-form-module~toll-controls-toll-c~db1b2e11-es2015.js","sourcesContent":["import {Injectable} from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DateService {\n\n  constructor() {\n  }\n\n  getToday() {\n    return new Date(new Date().getTime() -\n      new Date().getTimezoneOffset() * 60000).toISOString();\n  }\n}\n","import {Component, Input, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {Router} from '@angular/router';\nimport {ModalController} from '@ionic/angular';\nimport {TollControl} from '../../../../interfaces/TollControl';\nimport {TollControlService} from '../../../../services/v1/toll-control.service';\nimport {ImageDetailComponent} from '../../../../components/modals/image-detail/image-detail.component';\nimport {CameraPhotoFile} from '../../../../interfaces/CameraPhotoFile';\nimport {ToastComponent} from '../../../../components/toast/toast.component';\nimport {CameraService} from '../../../../services/utils/camera.service';\nimport {AuthService} from '../../../../services/v1/auth.service';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {HttpUploadFileService} from '../../../../services/utils/http-upload-file.service';\nimport {DateService} from '../../../../services/utils/date.service';\n\n@Component({\n  selector: 'app-toll-control-form',\n  templateUrl: './toll-control-form.page.html',\n  styleUrls: ['./toll-control-form.page.scss'],\n})\nexport class TollControlFormPage implements OnInit {\n  @Input() tollControl: TollControl;\n  form: FormGroup;\n  showInputErrorMessage = false;\n  submitting = false;\n  today = new Date();\n  maxYear: number;\n  minYear: number;\n\n  files: CameraPhotoFile[] = [];\n  tollControlId: string;\n  uploadedFilesIndexes: number[] = [];\n  uploadingErrorFilesIndexes: number[] = [];\n  uploadingFileIndex: number;\n  authToken: string;\n\n  constructor(private formBuilder: FormBuilder,\n              private router: Router,\n              private authService: AuthService,\n              private dateService: DateService,\n              public sanitizer: DomSanitizer,\n              private httpUploadFileService: HttpUploadFileService,\n              private toastComponent: ToastComponent,\n              private cameraService: CameraService,\n              private modalController: ModalController,\n              private tollControlService: TollControlService) {\n    this.maxYear = this.today.getFullYear() + 2;\n    this.minYear = this.today.getFullYear() - 1;\n\n    this.form = this.formBuilder.group({\n      date: ['', Validators.required],\n      station: [''],\n      total: ['']\n    });\n  }\n\n  ngOnInit() {\n    if (this.tollControl) {\n      this.setTollControl();\n    }\n\n    this.authService.getAuthToken().then(authToken => {\n      this.authToken = authToken;\n    });\n\n    this.form.controls.date.setValue(this.dateService.getToday());\n  }\n\n  setTollControl() {\n    this.form.controls.date.setValue(this.tollControl.date);\n    this.form.controls.station.setValue(this.tollControl.station);\n    this.form.controls.total.setValue(this.tollControl.total);\n  }\n\n  submit() {\n    if (this.form.valid) {\n      this.showInputErrorMessage = false;\n      this.tollControl ? this.updateTollControl() : this.storeTollControl();\n    } else {\n      this.showInputErrorMessage = true;\n    }\n  }\n\n  storeTollControl() {\n    this.submitting = true;\n    const body = this.setBody();\n    this.tollControlService.storeTollControl(body)\n      .subscribe((response: any) => {\n        this.tollControlId = response.toll_control_id;\n        if (this.files.length > 0) {\n          this.checkFiles();\n        } else {\n          this.closeModal();\n        }\n      }, error => {\n        this.submitting = false;\n      });\n  }\n\n  updateTollControl() {\n    this.submitting = true;\n    const body = this.setBody();\n    this.tollControlService.updateTollControl(this.tollControl, body)\n      .subscribe((response: any) => {\n        this.tollControlId = response.toll_control_id;\n        if (this.files.length > 0) {\n          this.checkFiles();\n        } else {\n          this.closeModal();\n        }\n      }, error => {\n        this.submitting = false;\n      });\n  }\n\n  async uploadFiles() {\n    let i = 0;\n    this.uploadingFileIndex = i;\n    for (const file of this.files) {\n      await this.uploadFile(file.file)\n        .then(() => {\n          this.uploadedFilesIndexes.push(i);\n        })\n        .catch(err => {\n          this.uploadingErrorFilesIndexes.push(i);\n        }).finally(() => {\n          i++;\n          this.uploadingFileIndex = i;\n        });\n    }\n  }\n\n  uploadFile(file): Promise<any> {\n    return new Promise((resolve, reject) => {\n      const body = {\n        toll_control_id: this.tollControlId.toString()\n      };\n      this.httpUploadFileService.uploadFile('toll-control-images', file, this.authToken, body)\n        .then(() => {\n          resolve(true);\n        })\n        .catch(err => {\n          reject(err);\n          this.toastComponent.presentToast('No se pudo carga la imagen del control de peaje. Intente nuevamente', 'medium', 2500);\n        });\n    });\n  }\n\n  setBody() {\n    return {\n      date: this.form.value.date,\n      station: this.form.value.station,\n      total: this.form.value.total,\n    };\n  }\n\n  async viewControlImageDetail(file: CameraPhotoFile) {\n    const modal = await this.modalController.create({\n      component: ImageDetailComponent,\n      componentProps: {file}\n    });\n    await modal.present();\n  }\n\n  takePicture() {\n    this.cameraService.takePicture().then((cameraPhotoFile: CameraPhotoFile) => {\n      this.files.push(cameraPhotoFile);\n    }).catch(err => {\n      if (err !== 'No Image Selected') {\n        this.toastComponent.presentToast(\n          `No se pudo acceder a la cámara (error: ${err})`,\n          'middle',\n          3000,\n        );\n      }\n    });\n  }\n\n  checkFiles() {\n    this.uploadedFilesIndexes = [];\n    this.uploadingErrorFilesIndexes = [];\n\n    this.uploadFiles().then(() => {\n      this.closeModal();\n    });\n  }\n\n  closeModal() {\n    this.form.reset();\n    this.submitting = false;\n    this.dismiss(true);\n  }\n\n  dismiss(success) {\n    this.modalController.dismiss({success});\n  }\n\n  deleteImage(i) {\n    this.files.splice(i, 1);\n  }\n\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"end\">\n      <ion-icon name=\"close\" (click)=\"dismiss(false)\" class=\"font-2em\"></ion-icon>\n    </ion-buttons>\n    <ion-title>CONTROL PEAJES</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-text-center\">\n  <form [formGroup]=\"form\">\n    <div class=\"form-group\">\n      <ion-label>Fecha</ion-label>\n      <ion-item lines=\"none\" class=\"custom-item\">\n        <ion-datetime displayFormat=\"DD MMMM YYYY\"\n                      display-timezone=\"America/Argentina/Buenos_Aires\"\n                      [max]=\"maxYear\"\n                      [min]=\"minYear\"\n                      formControlName=\"date\"\n                      doneText=\"ok\"\n                      cancelText=\"cancelar\"\n                      monthNames=\"enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, diciembre\"\n                      monthShortNames=\"ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic\"\n                      dayNames=\"domingo, lunes, martes, miércoles, jueves, viernes, sábado, domingo\"\n                      dayShortNames=\"dom, lun, mar, mié, jue, vie, sáb, dom\">\n        </ion-datetime>\n      </ion-item>\n      <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.date.invalid && showInputErrorMessage\">\n        Este campo es requerido\n      </p>\n    </div>\n\n    <div class=\"form-group\">\n      <ion-label>Estación</ion-label>\n      <input type=\"text\" formControlName=\"station\">\n      <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.station.invalid && showInputErrorMessage\">\n        Este campo es requerido\n      </p>\n    </div>\n\n    <div class=\"form-group\">\n      <ion-label>Total</ion-label>\n      <!--      <input type=\"tel\" inputmode=\"numeric\" pattern=\"[0-9]+(\\,[0-9][0-9]?)?\" formControlName=\"total\">-->\n      <input inputmode=\"decimal\" pattern=\"[0-9]+(\\.[0-9][0-9]?)?\" formControlName=\"total\">\n      <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.total.invalid && showInputErrorMessage\">\n        Este campo debe ser numérico, puede tener dos decimales\n      </p>\n    </div>\n  </form>\n\n  <ion-button class=\"custom-secondary-button\" (click)=\"takePicture()\">\n    <ion-icon name=\"camera\"></ion-icon>\n    Tomar foto\n  </ion-button>\n\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"6\" *ngFor=\"let file of files; let i=index\">\n        <img class=\"control-image\"\n             (click)=\"viewControlImageDetail(file)\"\n             [src]=\"sanitizer.bypassSecurityTrustUrl(file.src)\"\n             alt=\"control-image\">\n        <ion-icon name=\"trash\" class=\"delete-icon\" (click)=\"deleteImage(i)\"\n                  *ngIf=\"uploadedFilesIndexes.indexOf(i) <= -1\">\n        </ion-icon>\n        <ion-icon name=\"checkmark\" class=\"checkmark-icon\" color=\"success\"\n                  *ngIf=\"uploadedFilesIndexes.indexOf(i) > -1\">\n        </ion-icon>\n        <ion-progress-bar class=\"uploadingFile\" type=\"indeterminate\"\n                          *ngIf=\"uploadingFileIndex === i\"></ion-progress-bar>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <div class=\"ion-padding\">\n    <ion-progress-bar *ngIf=\"submitting\" type=\"indeterminate\">\n    </ion-progress-bar>\n    <ion-button class=\"custom-button\"\n                [disabled]=\"submitting\"\n                (click)=\"submit()\">\n      Aceptar\n    </ion-button>\n  </div>\n</ion-content>\n\n","import {Injectable} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\nimport {TollControl} from '../../interfaces/TollControl';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TollControlService {\n  API_URL = environment.API_URL;\n  V1 = 'v1/app/';\n\n  constructor(private http: HttpClient) {\n  }\n\n  getTollControls(month, year) {\n    return this.http.get(`${this.API_URL}${this.V1}toll-controls/month/${month}/year/${year}`);\n  }\n\n  storeTollControl(body) {\n    return this.http.post(`${this.API_URL}${this.V1}toll-controls`, body);\n  }\n\n  updateTollControl(tollControl: TollControl, body) {\n    return this.http.put(`${this.API_URL}${this.V1}toll-controls/${tollControl.id}`, body);\n  }\n\n  deleteTollControl(tollControl: TollControl) {\n    return this.http.delete(`${this.API_URL}${this.V1}toll-controls/${tollControl.id}`);\n  }\n}\n"],"sourceRoot":"webpack:///"}