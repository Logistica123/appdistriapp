{"version":3,"sources":["./src/app/services/utils/call-number.service.ts","./src/app/components/popovers/delivery-priority-select/delivery-priority-select.component.html","./src/app/components/popovers/delivery-priority-select/delivery-priority-select.component.ts","./src/app/pages/delivery-map/delivery-map.page.ts","./src/app/pages/delivery-map/delivery-map.page.html"],"names":[],"mappings":"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","file":"default~pages-delivery-map-delivery-map-module~pages-journeys-journey-list-journey-list-module-es2015.js","sourcesContent":["import {Injectable} from '@angular/core';\nimport {CallNumber} from '@ionic-native/call-number/ngx';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CallNumberService {\n\n  constructor(private callNumber: CallNumber) {\n  }\n\n  call(phoneNumber: string) {\n    this.callNumber.callNumber(phoneNumber, true)\n      .then(res => console.log('Launched dialer!', res))\n      .catch(err => {});\n  }\n}\n","<ion-content>\n  <ion-item>\n    <ion-label>Seleccione</ion-label>\n    <ion-select okText=\"Ok\" cancelText=\"Cancelar\" (ionChange)=\"selectOption($event)\">\n      <ion-select-option *ngFor=\"let option of options\" [value]=\"option\">{{option}}</ion-select-option>\n    </ion-select>\n  </ion-item>\n</ion-content>\n\n\n","import {Component, Input, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'app-delivery-priority-select',\n  templateUrl: './delivery-priority-select.component.html',\n  styleUrls: ['./delivery-priority-select.component.scss'],\n})\nexport class DeliveryPrioritySelectComponent implements OnInit {\n  @Input() length: number;\n  options: number[] = [];\n\n  constructor() {\n  }\n\n  ngOnInit() {\n    this.setOptions();\n  }\n\n  setOptions() {\n    for (let i = 1; i < this.length; i++) {\n      this.options.push(i);\n    }\n  }\n\n  selectOption(option) {\n    console.log(option.detail.value);\n    console.log('selected option', option);\n  }\n\n}\n","import {AfterViewInit, Component, ElementRef, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {OrderService} from '../../services/v1/order.service';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {Order} from '../../interfaces/Order';\nimport {GeolocationService} from '../../services/v1/geolocation.service';\nimport {IonTabs, ModalController, PopoverController} from '@ionic/angular';\nimport {DeliverOrderComponent} from '../../components/modals/deliver-order/deliver-order.component';\nimport {CallNumberService} from '../../services/utils/call-number.service';\nimport {NotDeliveredComponent} from '../../components/modals/not-delivered/not-delivered.component';\nimport {Geoposition} from '@ionic-native/geolocation';\nimport {Circle, Environment, GoogleMap, GoogleMapOptions, GoogleMaps, ILatLng, Marker} from '@ionic-native/google-maps';\nimport {DeliveryPrioritySelectComponent} from '../../components/popovers/delivery-priority-select/delivery-priority-select.component';\n\ndeclare var google;\n\n@Component({\n  selector: 'app-delivery-map',\n  templateUrl: './delivery-map.page.html',\n  styleUrls: ['./delivery-map.page.scss'],\n})\nexport class DeliveryMapPage implements OnInit, AfterViewInit, OnDestroy {\n  orders: Order[];\n  nearbyOrders: Order[];\n  driverPosition: Geoposition;\n  currentOrder: Order;\n  selectedOrder: Order;\n  currentOrderIndex = 0;\n  driverGeolocationSubscription: any;\n  currentOrdersSubscription: any;\n  notDeliveringOrder = false;\n  deliveringOrder = false;\n  skipping = false;\n  radius = 1500;\n  showAllMarkersFlag = false;\n  type: string;\n  markersOrders: Order[] = [];\n  ordersOptimized = false;\n  showCelebration = false;\n  initialOrdersCount = 0;\n  completedOrdersCount = 0;\n  savedClientsCount = 0;\n  startTime = Date.now();\n  soundEnabled = true;\n  confettiPieces = Array.from({length: 50}, (_, index) => index);\n  celebrationSummary = {completed: 0, total: 0, saved: 0, duration: ''};\n\n  // @ViewChild('deliveryMap', {static: true}) mapElement: ElementRef;\n  // map: GoogleMap;\n  // driverMarker: Marker;\n  // markers: Marker[] = [];\n  // circle: Circle;\n\n  constructor(private orderService: OrderService,\n              private router: Router,\n              private activatedRoute: ActivatedRoute,\n              private callNumberService: CallNumberService,\n              private modalController: ModalController,\n              private popoverController: PopoverController,\n              private geolocationService: GeolocationService) {\n    this.type = this.activatedRoute.snapshot.paramMap.get('type');\n  }\n\n  ngOnInit() {\n    //\n  }\n\n  ngAfterViewInit() {\n    this.currentOrdersSubscription = this.orderService.getCurrentOrders$()\n      .subscribe(orders => {\n        if (!orders) {\n          return;\n        }\n        this.orders = orders;\n        if (this.initialOrdersCount === 0 && this.orders?.length) {\n          this.initialOrdersCount = this.orders.length;\n          this.startTime = Date.now();\n          this.completedOrdersCount = 0;\n          this.savedClientsCount = 0;\n        }\n        if (this.initialOrdersCount > 0) {\n          this.completedOrdersCount = this.initialOrdersCount - (this.orders?.length || 0);\n          if (this.completedOrdersCount < 0) {\n            this.completedOrdersCount = 0;\n          }\n        }\n        this.ordersOptimized = false;\n        console.log(this.orders);\n        this.tryOptimizeOrders();\n        this.currentOrder = this.orders[this.currentOrderIndex];\n        this.selectedOrder = this.currentOrder;\n        console.log(this.currentOrder);\n        this.findNearbyMarkers();\n      });\n\n    this.checkWatchLocationsSubscription();\n\n    this.driverPosition = this.geolocationService.getDriverPosition();\n    this.driverGeolocationSubscription = this.geolocationService.driverPosition$\n      .subscribe(driverPosition => {\n        if (driverPosition) {\n          this.driverPosition = driverPosition;\n          this.tryOptimizeOrders();\n        }\n      });\n  }\n\n  ngOnDestroy(): void {\n    if (this.driverGeolocationSubscription) {\n      this.driverGeolocationSubscription.unsubscribe();\n    }\n\n    if (this.currentOrdersSubscription) {\n      this.currentOrdersSubscription.unsubscribe();\n    }\n  }\n\n\n  checkWatchLocationsSubscription() {\n    console.log(this.geolocationService.checkWatchLocationsSubscription());\n    if (!this.geolocationService.checkWatchLocationsSubscription()) {\n      this.geolocationService.watchPosition();\n    }\n  }\n\n  viewDeliveryOrderMap() {\n    // this.showAllMarkers = !this.showAllMarkers;\n    // this.nearbyOrders = this.orders;\n    this.router.navigateByUrl('all-orders-map');\n  }\n\n  selectOrder(ev) {\n    this.selectedOrder = ev;\n    console.log(this.selectedOrder);\n  }\n\n  async deliverOrder() {\n    const modal = await this.modalController.create({\n      component: DeliverOrderComponent,\n      componentProps: {order: this.selectedOrder},\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data?.success) {\n      if (data?.saveClient) {\n        this.savedClientsCount += 1;\n      }\n      this.selectedOrder.status = 'delivered';\n      this.selectedOrder.status_es = 'entregada';\n      this.goToNextOrder(true);\n    }\n  }\n\n  async showNotDeliverOptions() {\n    const modal = await this.modalController.create({\n      component: NotDeliveredComponent,\n      cssClass: 'modal-not-deliver-options',\n      componentProps: {order: this.selectedOrder},\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data?.success) {\n      this.selectedOrder.status = 'not-delivered';\n      this.selectedOrder.status_es = 'no entregada';\n      this.skip();\n    }\n  }\n\n  async showDeliveryOrderOptions() {\n    const popover = await this.popoverController.create({\n      component: DeliveryPrioritySelectComponent,\n      componentProps: {length: this.orders.length},\n    });\n    await popover.present();\n    const {data} = await popover.onDidDismiss();\n    console.log(data);\n  }\n\n  callNumber(order: Order) {\n    this.callNumberService.call(order.phone);\n  }\n\n  navigateBack() {\n    this.type === 'urban-distribution'\n      ? this.router.navigateByUrl('urban-distribution-list')\n      : this.router.navigateByUrl('journey-list');\n  }\n\n  skip() {\n    this.goToNextOrder(false);\n  }\n\n  private tryOptimizeOrders() {\n    if (this.ordersOptimized) {\n      return;\n    }\n\n    if (!this.orders || this.orders.length === 0) {\n      return;\n    }\n\n    if (!this.driverPosition || !this.driverPosition.coords) {\n      return;\n    }\n\n    if (!(window as any).google || !google.maps?.geometry?.spherical) {\n      return;\n    }\n\n    const optimized = this.getOptimizedOrderSequence();\n    if (optimized.length === this.orders.length) {\n      this.orders = optimized;\n      this.currentOrderIndex = 0;\n      this.currentOrder = this.orders[this.currentOrderIndex];\n      this.selectedOrder = this.currentOrder;\n      this.ordersOptimized = true;\n    }\n  }\n\n  private goToNextOrder(removeCurrent: boolean) {\n    if (!this.orders || this.orders.length === 0) {\n      return;\n    }\n\n    const currentId = this.selectedOrder?.id;\n    if (removeCurrent && currentId) {\n      const index = this.orders.findIndex(order => order.id === currentId);\n      if (index !== -1) {\n        this.orders.splice(index, 1);\n        if (index <= this.currentOrderIndex && this.currentOrderIndex > 0) {\n          this.currentOrderIndex--;\n        }\n      }\n    } else {\n      this.currentOrderIndex = (this.currentOrderIndex + 1) % this.orders.length;\n    }\n\n    if (this.orders.length === 0) {\n      this.orderService.setCurrentOrders$(this.orders.slice());\n      this.currentOrder = null;\n      this.selectedOrder = null;\n      this.markersOrders = [];\n      this.triggerCelebration();\n      return;\n    }\n\n    if (this.currentOrderIndex >= this.orders.length) {\n      this.currentOrderIndex = 0;\n    }\n\n    this.currentOrder = this.orders[this.currentOrderIndex];\n    this.selectedOrder = this.currentOrder;\n    this.findNearbyMarkers();\n    this.orderService.setCurrentOrders$(this.orders.slice());\n  }\n\n  finishDeliveries() {\n    this.showCelebration = false;\n    this.navigateBack();\n  }\n\n  private triggerCelebration() {\n    this.celebrationSummary = {\n      completed: this.completedOrdersCount,\n      total: this.initialOrdersCount,\n      saved: this.savedClientsCount,\n      duration: this.formatDuration(Date.now() - this.startTime)\n    };\n    this.showCelebration = true;\n    this.playCelebrationSound();\n  }\n\n  private playCelebrationSound() {\n    if (!this.soundEnabled) {\n      return;\n    }\n    try {\n      const AudioContext = (window as any).AudioContext || (window as any).webkitAudioContext;\n      if (!AudioContext) {\n        return;\n      }\n      const ctx = new AudioContext();\n      const endTime = ctx.currentTime + 1.8;\n\n      const melody = [\n        {freq: 523.25, start: 0, duration: 0.25},\n        {freq: 659.25, start: 0.15, duration: 0.25},\n        {freq: 783.99, start: 0.3, duration: 0.3},\n        {freq: 1046.5, start: 0.6, duration: 0.4},\n        {freq: 880.0, start: 1.0, duration: 0.5}\n      ];\n\n      melody.forEach(note => {\n        const osc = ctx.createOscillator();\n        const gain = ctx.createGain();\n        osc.type = 'sine';\n        osc.frequency.value = note.freq;\n        const startTime = ctx.currentTime + note.start;\n        const stopTime = startTime + note.duration;\n        gain.gain.setValueAtTime(0, startTime);\n        gain.gain.linearRampToValueAtTime(0.5, startTime + 0.05);\n        gain.gain.exponentialRampToValueAtTime(0.001, stopTime);\n\n        osc.connect(gain);\n        gain.connect(ctx.destination);\n        osc.start(startTime);\n        osc.stop(stopTime);\n      });\n\n      ctx.close && setTimeout(() => ctx.close(), (endTime - ctx.currentTime) * 1000);\n    } catch (error) {\n      console.warn('Celebration sound not supported', error);\n    }\n  }\n\n  toggleSound() {\n    this.soundEnabled = !this.soundEnabled;\n  }\n\n  async shareCompletion() {\n    const message = `¡Ruta completada! ${this.completedOrdersCount}/${this.initialOrdersCount} entregas finalizadas en ${this.celebrationSummary.duration}.`;\n    try {\n      if ((navigator as any).share) {\n        await (navigator as any).share({\n          title: 'DistriApp',\n          text: message\n        });\n      } else if (navigator.clipboard && navigator.clipboard.writeText) {\n        await navigator.clipboard.writeText(message);\n        window.alert('Resumen copiado al portapapeles');\n      } else {\n        window.alert(message);\n      }\n    } catch (error) {\n      console.warn('No se pudo compartir el resumen', error);\n    }\n  }\n\n  private formatDuration(ms: number): string {\n    const totalSeconds = Math.max(0, Math.floor(ms / 1000));\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    if (minutes === 0) {\n      return `${seconds}s`;\n    }\n    return `${minutes}m ${seconds.toString().padStart(2, '0')}s`;\n  }\n\n  private getOptimizedOrderSequence(): Order[] {\n    const remaining = [...this.orders];\n    const optimized: Order[] = [];\n    let currentPoint = new google.maps.LatLng(this.driverPosition.coords.latitude, this.driverPosition.coords.longitude);\n\n    while (remaining.length > 0) {\n      let nearestIdx = 0;\n      let nearestDistance = Number.POSITIVE_INFINITY;\n\n      remaining.forEach((order, index) => {\n        if (!order?.location?.lat || !order?.location?.lng) {\n          return;\n        }\n        const orderPoint = new google.maps.LatLng(+order.location.lat, +order.location.lng);\n        const distance = google.maps.geometry.spherical.computeDistanceBetween(currentPoint, orderPoint);\n        if (distance < nearestDistance) {\n          nearestDistance = distance;\n          nearestIdx = index;\n        }\n      });\n\n      const nextOrder = remaining.splice(nearestIdx, 1)[0];\n      optimized.push(nextOrder);\n      currentPoint = new google.maps.LatLng(+nextOrder.location.lat, +nextOrder.location.lng);\n    }\n\n    return optimized;\n  }\n\n  findNearbyMarkers() {\n    console.log('finding nearby orders...');\n    const anotherOrders = this.orders.filter(order => order.id !== +this.currentOrder.id);\n\n    const circle = new google.maps.Circle({\n      strokeColor: 'black',\n      strokeOpacity: 0.8,\n      strokeWeight: 2,\n      fillColor: 'blue',\n      fillOpacity: 0.35,\n      center: new google.maps.LatLng(+this.currentOrder.location.lat, +this.currentOrder.location.lng),\n      radius: this.radius\n    });\n\n    this.nearbyOrders = anotherOrders.filter(order =>\n      google.maps.geometry.spherical.computeDistanceBetween(\n        new google.maps.LatLng(+order.location.lat, +order.location.lng),\n        circle.getCenter()) <= this.radius\n    );\n    this.updateMarkersOrders();\n  }\n\n  toggleAllMarkers() {\n    this.showAllMarkersFlag = !this.showAllMarkersFlag;\n    this.updateMarkersOrders();\n  }\n\n  updateMarkersOrders() {\n    this.showAllMarkersFlag ? this.showAllMarkers() : this.hideAllMarkers();\n  }\n\n  showAllMarkers() {\n    console.log(this.nearbyOrders);\n    this.markersOrders = this.orders.filter(order => order.id !== this.currentOrder.id);\n  }\n\n  hideAllMarkers() {\n    console.log(this.nearbyOrders);\n    this.markersOrders = [];\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"navigateBack()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-buttons slot=\"end\" *ngIf=\"selectedOrder\">\n      <ion-button href='https://api.whatsapp.com/send/?phone={{selectedOrder.phone}}&text=Hola'>\n        <ion-icon slot=\"icon-only\" name=\"logo-whatsapp\"></ion-icon>\n      </ion-button>\n\n      <ion-button *ngIf=\"selectedOrder\" (click)=\"callNumber(selectedOrder)\">\n        <ion-icon slot=\"icon-only\" name=\"call-outline\"></ion-icon>\n      </ion-button>\n\n<!--      <ion-button (click)=\"toggleAllMarkers()\">-->\n<!--        <ion-icon slot=\"icon-only\" name=\"map-outline\" [color]=\"showAllMarkersFlag ? 'warning' : 'light'\"></ion-icon>-->\n<!--      </ion-button>-->\n\n      <ion-button (click)=\"viewDeliveryOrderMap()\">\n        <ion-icon slot=\"icon-only\" name=\"map-outline\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Mapa de entregas</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content fullscreen>\n  <div class=\"map-container\">\n    <app-map [currentOrder]=\"currentOrder\"\n             [nearbyOrders]=\"nearbyOrders\"\n             [markersOrders]=\"markersOrders\"\n             [driverPosition]=\"driverPosition\"\n             [orders]=\"orders\"\n             [radius]=\"radius\"\n             (deliverOrderEvent)=\"deliverOrder()\"\n             (notDeliverOrderEvent)=\"showNotDeliverOptions()\"\n             (updateDeliveryOrderEvent)=\"showDeliveryOrderOptions()\"\n             (selectOrderEvent)=\"selectOrder($event)\">\n    </app-map>\n\n    <div class=\"order-info-card\" *ngIf=\"selectedOrder\">\n      <div class=\"order-info-header\">\n        <ion-badge [ngClass]=\"{\n            'status-delivered': selectedOrder?.status === 'delivered',\n            'status-pending': selectedOrder?.status === 'pending' || selectedOrder?.status === 'skipped',\n            'status-alert': selectedOrder?.status === 'not-delivered'\n          }\">\n          {{selectedOrder?.status_es | uppercase}}\n        </ion-badge>\n        <span class=\"order-info-tag\">Próxima parada</span>\n      </div>\n\n      <h2 class=\"order-info-title\">\n        {{selectedOrder?.location?.name || selectedOrder?.location?.address}}\n      </h2>\n      <p class=\"order-info-address\">\n        {{selectedOrder?.location?.address}}\n      </p>\n\n      <div class=\"order-info-meta\">\n        <div class=\"meta-item\">\n          <ion-icon name=\"business-outline\"></ion-icon>\n          <span>{{selectedOrder?.receiver || 'Sin destinatario'}}</span>\n        </div>\n        <div class=\"meta-item\" *ngIf=\"selectedOrder?.phone\">\n          <ion-icon name=\"call-outline\"></ion-icon>\n          <span>{{selectedOrder?.phone}}</span>\n        </div>\n        <div class=\"meta-item\" *ngIf=\"selectedOrder?.location?.city\">\n          <ion-icon name=\"location-outline\"></ion-icon>\n          <span>{{selectedOrder?.location?.city}}</span>\n        </div>\n      </div>\n\n      <p class=\"order-info-notes\" *ngIf=\"selectedOrder?.description\">\n        {{selectedOrder?.description}}\n      </p>\n\n      <div class=\"order-info-flags\">\n        <ion-chip *ngIf=\"selectedOrder?.id\" color=\"light\">\n          <ion-icon name=\"pricetag-outline\"></ion-icon>\n          <ion-label>Orden #{{selectedOrder?.id}}</ion-label>\n        </ion-chip>\n        <ion-chip *ngIf=\"selectedOrder?.flag_color\" [style.border-color]=\"selectedOrder?.flag_color\">\n          <span class=\"color-dot\" [style.background]=\"selectedOrder?.flag_color\"></span>\n          <ion-label>Bandera</ion-label>\n        </ion-chip>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"celebration-overlay\" *ngIf=\"showCelebration\">\n    <div class=\"confetti\" aria-hidden=\"true\">\n      <span *ngFor=\"let piece of confettiPieces\"\n            [style.--confetti-index]=\"piece\"\n            [style.--confetti-hue]=\"(piece * 37) % 360\"></span>\n    </div>\n    <div class=\"celebration-backdrop\"></div>\n    <div class=\"celebration-card\" role=\"dialog\" aria-modal=\"true\" aria-label=\"Resumen de entregas completadas\">\n      <div class=\"celebration-actions\">\n        <ion-button fill=\"clear\" size=\"small\" (click)=\"toggleSound()\" [attr.aria-pressed]=\"soundEnabled\" aria-label=\"Alternar sonido\">\n          <ion-icon [name]=\"soundEnabled ? 'volume-high' : 'volume-mute'\"></ion-icon>\n        </ion-button>\n        <ion-button fill=\"clear\" size=\"small\" (click)=\"shareCompletion()\" aria-label=\"Compartir logro\">\n          <ion-icon name=\"share-outline\"></ion-icon>\n        </ion-button>\n      </div>\n      <div class=\"fireworks\" aria-hidden=\"true\">\n        <span class=\"firework firework-1\"></span>\n        <span class=\"firework firework-2\"></span>\n        <span class=\"firework firework-3\"></span>\n        <span class=\"firework firework-4\"></span>\n        <span class=\"firework firework-5\"></span>\n      </div>\n      <h1>¡Felicitaciones!</h1>\n      <p>Completaste todas las entregas del día. ¡Gran trabajo!</p>\n      <div class=\"celebration-stats\">\n        <div class=\"stat\">\n          <span class=\"stat-label\">Entregas completadas</span>\n          <span class=\"stat-value\">{{celebrationSummary.completed}} / {{celebrationSummary.total}}</span>\n        </div>\n        <div class=\"stat\">\n          <span class=\"stat-label\">Tiempo dedicado</span>\n          <span class=\"stat-value\">{{celebrationSummary.duration}}</span>\n        </div>\n        <div class=\"stat\">\n          <span class=\"stat-label\">Clientes guardados</span>\n          <span class=\"stat-value\">{{celebrationSummary.saved}}</span>\n        </div>\n      </div>\n      <ion-button expand=\"block\" color=\"primary\" (click)=\"finishDeliveries()\">\n        Volver al panel\n      </ion-button>\n    </div>\n  </div>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-grid class=\"ion-no-padding\">\n      <ion-row>\n        <ion-col size=\"4\" class=\"ion-no-padding\">\n          <ion-tab-button (click)=\"deliverOrder()\">\n            <ion-icon name=\"checkmark-done\" *ngIf=\"!deliveringOrder\"></ion-icon>\n            <ion-spinner name=\"bubbles\" *ngIf=\"deliveringOrder\"></ion-spinner>\n            <ion-label *ngIf=\"!deliveringOrder\">Entregar</ion-label>\n            <ion-label *ngIf=\"deliveringOrder\">Entregando...</ion-label>\n          </ion-tab-button>\n        </ion-col>\n        <ion-col size=\"4\" class=\"ion-no-padding\">\n          <ion-tab-button (click)=\"showNotDeliverOptions()\">\n            <ion-icon name=\"alert-circle\" *ngIf=\"!notDeliveringOrder\"></ion-icon>\n            <ion-spinner name=\"bubbles\" *ngIf=\"notDeliveringOrder\"></ion-spinner>\n            <ion-label *ngIf=\"!notDeliveringOrder\">No entregado</ion-label>\n            <ion-label *ngIf=\"notDeliveringOrder\">No entregado...</ion-label>\n          </ion-tab-button>\n        </ion-col>\n        <ion-col size=\"4\" class=\"ion-no-padding\">\n          <ion-tab-button (click)=\"skip()\">\n            <ion-icon name=\"arrow-forward-circle\" *ngIf=\"!skipping\"></ion-icon>\n            <ion-spinner name=\"bubbles\" *ngIf=\"skipping\"></ion-spinner>\n            <ion-label *ngIf=\"!skipping\">Saltar</ion-label>\n            <ion-label *ngIf=\"skipping\">Saltando...</ion-label>\n          </ion-tab-button>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </ion-toolbar>\n</ion-footer>\n"],"sourceRoot":"webpack:///"}