{"version":3,"sources":["./src/app/pages/journeys/journey-form/journey-form.page.ts","./src/app/pages/journeys/journey-form/journey-form.page.html","./src/app/services/v1/geocode.service.ts"],"names":[],"mappings":"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","file":"default~pages-journeys-journey-form-journey-form-module~pages-journeys-journey-list-journey-list-module-es2015.js","sourcesContent":["import {Component, NgZone, OnInit} from '@angular/core';\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\nimport {Location} from '../../../interfaces/Location';\nimport {OrderService} from '../../../services/v1/order.service';\nimport {ToastComponent} from '../../../components/toast/toast.component';\nimport {LoadingSpinnerComponent} from '../../../components/loading-spinner/loading-spinner.component';\nimport {Router} from '@angular/router';\nimport {ModalController} from '@ionic/angular';\nimport {LocationService} from '../../../services/v1/location.service';\nimport {LocationMapComponent} from '../../../components/modals/location-map/location-map.component';\nimport {GeocodeService} from '../../../services/v1/geocode.service';\n\n@Component({\n  selector: 'app-journey-form',\n  templateUrl: './journey-form.page.html',\n  styleUrls: ['./journey-form.page.scss'],\n})\nexport class JourneyFormPage implements OnInit {\n  loading = false;\n  form: FormGroup;\n  searching = true;\n  locationExists = false;\n  searchInputFormControl = new FormControl();\n  locations: Location[] = [];\n  filteredLocations: Location[] = [];\n  location: Location;\n  results: any;\n  hasNewOrder = false;\n  defaultLat = -27.4862341;\n  defaultLng = -58.8624276;\n\n  constructor(private formBuilder: FormBuilder,\n              private ngZone: NgZone,\n              private orderService: OrderService,\n              private toastComponent: ToastComponent,\n              private loadingSpinnerComponent: LoadingSpinnerComponent,\n              private router: Router,\n              private geocodeService: GeocodeService,\n              private modalController: ModalController,\n              private locationService: LocationService) {\n    this.form = this.formBuilder.group({\n      location_name: ['', Validators.required],\n      address: ['', Validators.required],\n      city: ['Buenos Aires', Validators.required],\n      notes: [''],\n      opening_hours: [''],\n      phones: ['']\n    });\n  }\n\n  ngOnInit(): void {\n    // this.orderService.currentOrders.subscribe(updated => {\n    //   this.getLocations();\n    // });\n    this.searchInputFormControl.valueChanges.subscribe(val => {\n      this.form.controls.location_name.setValue(val);\n      this.form.controls.address.setValue(val);\n    });\n  }\n\n  getLocations() {\n    this.locationService.getLocations()\n      .subscribe((response: any) => {\n        this.locations = response.locations;\n      }, error => {\n        //\n      }, () => {\n        //\n      });\n  }\n\n  submit() {\n    if (!this.locationExists) {\n      this.geocodeAddress();\n    } else {\n      this.storeOrder();\n    }\n  }\n\n  storeOrder() {\n    const body = {\n      type: 'journey',\n      location_id: this.location.id,\n      notes: this.form.value.notes,\n      opening_hours: this.form.value.opening_hours,\n      phones: this.form.value.phones,\n    };\n    this.orderService.store(body)\n      .subscribe((response: any) => {\n          // this.orderService.setUpdatedOrders(true);\n          //\n          this.router.navigateByUrl('journey-list');\n        }, error => {\n          //\n        },\n        () => {\n          this.resetForm();\n          this.searchInputFormControl.setValue('');\n        });\n  }\n\n  geocodeAddress() {\n    const address = this.form.value.location_name + ', ' +\n      this.form.value.address + ', ' +\n      this.form.value.city;\n    const country = 'Argentina';\n    this.geocodeService.mapQuestGeocode(address, country).then((result: any) => {\n      this.showLocationMap(result.lat, result.lng);\n    }).catch(err => {\n      this.geocodeService.GMGeocodeAddress(address, country).then((result: any) => {\n        this.showLocationMap(result.lat, result.lng);\n      }).catch(error => {\n        this.showLocationMap(this.defaultLat, this.defaultLng);\n      });\n    });\n  }\n\n  async showLocationMap(lat: number, lng: number) {\n    const modal = await this.modalController.create({\n      component: LocationMapComponent,\n      cssClass: 'modal-show-location-map',\n      componentProps: {\n        lat,\n        lng\n      }\n    });\n    await modal.present();\n\n    modal.onDidDismiss().then(data => {\n      if (data.data && data.data.success) {\n        this.handleResults(data.data.lat, data.data.lng);\n      }\n    });\n  }\n\n  handleResults(lat, lng) {\n    let locality = '';\n    let administrativeAreaLevel1 = '';\n    let administrativeAreaLevel2 = '';\n\n    if (this.results.length > 0) {\n      this.results[0].address_components.map(addressComponent => {\n        addressComponent.types.map(type => {\n          if (type === 'locality') {\n            locality = addressComponent.long_name;\n          } else if (type === 'administrative_area_level_1') {\n            administrativeAreaLevel1 = addressComponent.long_name;\n          } else if (type === 'administrative_area_level_2') {\n            administrativeAreaLevel2 = addressComponent.long_name;\n          }\n        });\n      });\n    }\n\n    const body = {\n      type: 'journey',\n      name: this.form.value.location_name,\n      address: this.form.value.address,\n      city: this.form.value.city,\n      notes: this.form.value.notes,\n      opening_hours: this.form.value.opening_hours,\n      phones: this.form.value.phones,\n      locality,\n      administrative_area_level_1: administrativeAreaLevel1,\n      administrative_area_level_2: administrativeAreaLevel2,\n      lat,\n      lng\n    };\n    this.storeLocation(body);\n  }\n\n  storeLocation(body) {\n    this.locationService.storeLocation(body)\n      .subscribe((response: any) => {\n          this.hasNewOrder = true;\n          this.router.navigateByUrl('journey-list');\n        }, error => {\n          const message = error?.error?.custom_message || 'No se pudo registrar la dirección';\n          this.toastComponent.presentToast(message, 'middle', 3000);\n        },\n        () => {\n          //\n          this.resetForm();\n          this.searchInputFormControl.setValue('');\n        });\n  }\n\n  selectLocation(location: Location) {\n    this.locationExists = true;\n    this.location = location;\n    this.searching = false;\n    this.filteredLocations = [];\n    this.form.controls.location_name.setValue(location.name);\n    this.form.controls.location_name.disable();\n    this.form.controls.address.disable();\n    this.form.controls.address.setValue(location.address);\n    this.form.controls.address.disable();\n    this.form.controls.city.setValue(location.city);\n    this.form.controls.city.disable();\n\n    this.form.controls.notes.setValue(location.notes);\n    this.form.controls.opening_hours.setValue(location.opening_hours);\n    this.form.controls.phones.setValue(location.phones);\n  }\n\n  search(event) {\n    this.searching = true;\n    this.locationExists = false;\n    this.resetForm();\n    const keyword = event.detail.value.toLowerCase();\n    if (keyword === '') {\n      this.filteredLocations = [];\n    } else {\n      this.filteredLocations = this.locations.filter(location =>\n        location.name.toLowerCase().includes(keyword)\n        || location.full_address.toLowerCase().includes(keyword));\n    }\n    if (this.filteredLocations.length <= 0) {\n      this.searching = false;\n    }\n  }\n\n  clear() {\n    this.searching = false;\n    this.filteredLocations = [];\n  }\n\n  resetForm() {\n    this.form.controls.location_name.setValue(this.searchInputFormControl.value);\n    this.form.controls.address.setValue('');\n    this.form.controls.city.setValue('Corrientes');\n    this.form.controls.notes.setValue('');\n    this.form.controls.opening_hours.setValue('');\n    this.form.controls.phones.setValue('');\n\n    this.form.controls.location_name.enable();\n    this.form.controls.address.enable();\n    this.form.controls.city.enable();\n    this.form.controls.notes.enable();\n    this.form.controls.opening_hours.enable();\n    this.form.controls.phones.enable();\n  }\n\n  dismiss() {\n    this.modalController.dismiss({hasNewOrder: this.hasNewOrder});\n  }\n\n}\n","<ion-header no-border>\n  <ion-toolbar color=\"primary\">\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"dismiss()\">\n        <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>AGREGAR UBICACIÓN</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <ion-searchbar [formControl]=\"searchInputFormControl\"\n                 placeholder=\"Buscar\"\n                 debounce=\"500\"\n                 (ionChange)=\"search($event)\"\n                 (ionClear)=\"clear()\">\n  </ion-searchbar>\n\n  <ion-list *ngIf=\"filteredLocations.length > 0 && searching\">\n    <ion-item *ngFor=\"let location of filteredLocations\" tappable (click)=\"selectLocation(location)\">\n      <ion-label class=\"ion-text-wrap\">\n        <p><b>{{location.name}}</b></p>\n        <p>{{location.full_address}}</p>\n      </ion-label>\n    </ion-item>\n  </ion-list>\n\n  <form [formGroup]=\"form\" *ngIf=\"filteredLocations.length <= 0 && !searching\">\n    <ion-item>\n      <ion-label position=\"floating\">Nombre (*)</ion-label>\n      <ion-input formControlName=\"location_name\"></ion-input>\n    </ion-item>\n    <p class=\"form-error-message\" *ngIf=\"form.controls.location_name.errors\">Por favor introduzca este campo</p>\n\n    <ion-item>\n      <ion-label position=\"floating\">Dirección (*)</ion-label>\n      <ion-textarea rows=\"5\" formControlName=\"address\"></ion-textarea>\n    </ion-item>\n    <p class=\"form-error-message\" *ngIf=\"form.controls.address.errors\">Por favor introduzca este campo</p>\n\n    <ion-item>\n      <ion-label position=\"floating\">Ciudad</ion-label>\n      <ion-input formControlName=\"city\"></ion-input>\n    </ion-item>\n    <ion-item>\n      <ion-label position=\"floating\">Nota de ayuda para llegar</ion-label>\n      <ion-textarea rows=\"5\" formControlName=\"notes\"></ion-textarea>\n    </ion-item>\n    <ion-item>\n      <ion-label position=\"floating\">Horarios</ion-label>\n      <ion-textarea rows=\"2\" formControlName=\"opening_hours\"></ion-textarea>\n    </ion-item>\n    <ion-item>\n      <ion-label position=\"floating\">Números telefónicos</ion-label>\n      <ion-textarea rows=\"2\" formControlName=\"phones\"></ion-textarea>\n    </ion-item>\n  </form>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-button color=\"primary\"\n                shape=\"round\"\n                [disabled]=\"form.value.location_name === '' || form.value.address === '' || form.value.city === ''\"\n                size=\"full\"\n                (click)=\"submit()\">\n      AGREGAR\n    </ion-button>\n  </ion-toolbar>\n</ion-footer>\n\n","import {Injectable, NgZone} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GeocodeService {\n  results: any;\n\n  constructor(private ngZone: NgZone,\n              private http: HttpClient) {\n  }\n\n  mapQuestGeocode(addressToGeocode, country): Promise<{lat: number; lng: number}> {\n    return new Promise((resolve, reject) => {\n      const address = `${addressToGeocode},${country}`;\n      this.geocodeMapQuestAddress(address)\n        .subscribe((response: any) => {\n          const data = response;\n          if (data.results && data.results.length > 0) {\n            if (data.results[0].locations && data.results[0].locations.length > 0) {\n              if (data.results[0].locations[0].latLng) {\n                const lat = data.results[0].locations[0].latLng.lat;\n                const lng = data.results[0].locations[0].latLng.lng;\n            resolve({lat, lng});\n          }\n            }\n          } else {\n            reject();\n          }\n        }, error => {\n          reject(error);\n        });\n    });\n  }\n\n  GMGeocodeAddress(addressToGeocode, country): Promise<{lat: number; lng: number}> {\n    return new Promise((resolve, reject) => {\n      const self = this;\n      const address = `${addressToGeocode},${country}`;\n      const geocoder = new google.maps.Geocoder();\n      // tslint:disable-next-line:only-arrow-functions\n      geocoder.geocode({address}, (results, status) => {\n        if (status === google.maps.GeocoderStatus.OK) {\n          self.ngZone.run(() => {\n            self.results = results;\n            const lat = results[0].geometry.location.lat();\n            const lng = results[0].geometry.location.lng();\n            resolve({lat, lng});\n          });\n        } else {\n          reject(status);\n          // alert('Geocode was not successful for the following reason: ' + status);\n          if (status === google.maps.GeocoderStatus.ZERO_RESULTS) {\n            // self.toastComponent.presentToast('El API de Google Maps no encontró resultados');\n          }\n        }\n      });\n    });\n  }\n\n  geocodeMapQuestAddress(address) {\n    const key = environment.mapquest.key;\n    const endpoint = 'http://www.mapquestapi.com/geocoding/v1/address';\n    const url = `${endpoint}?key=${key}&location=${address}&thumbMaps=false&boundingBox=-21.357261,-74.723118,-57.6807156,-41.57098356&maxResults=1`;\n    return this.http.get(`${url}`);\n  }\n}\n"],"sourceRoot":"webpack:///"}