{"version":3,"sources":["./src/app/services/utils/file-chooser.service.ts","./src/app/pages/maintenance/document-file-form/document-file-form.page.ts","./src/app/pages/maintenance/document-file-form/document-file-form.page.html","./src/app/services/v1/document.service.ts"],"names":[],"mappings":"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","file":"default~pages-maintenance-document-file-form-document-file-form-module~pages-maintenance-document-fo~c271ae65-es2015.js","sourcesContent":["import {Injectable} from '@angular/core';\nimport {FileChooser} from '@ionic-native/file-chooser/ngx';\nimport {CameraPhotoFile} from '../../interfaces/CameraPhotoFile';\nimport {FilePath} from '@ionic-native/file-path/ngx';\nimport {File} from '@ionic-native/file/ngx';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class FileChooserService {\n\n  constructor(private fileChooser: FileChooser,\n              private filePath: FilePath,\n              private file: File) {\n  }\n\n  chooseFile() {\n    return new Promise((resolve, reject) => {\n      this.fileChooser.open()\n        .then(uri => {\n          this.filePath.resolveNativePath(uri).then(filePath => {\n            const filename = filePath.substring(filePath.lastIndexOf('/') + 1);\n            const path = filePath.substring(0, filePath.lastIndexOf('/') + 1);\n            // if (filename.indexOf(' ') > -1) {\n            //   const newFilename = filename.split(' ').join('_');\n            //   this.copyFile(path, filename, path, newFilename).then((val) => {\n            //     this.readFile(path, newFilename).then(documentFile => {\n            //       resolve(documentFile);\n            //     }).catch(err => {\n            //       reject(err);\n            //     });\n            //   });\n            // } else {\n            //   this.readFile(path, filename).then(documentFile => {\n            //     resolve(documentFile);\n            //   }).catch(err => {\n            //     reject(err);\n            //   });\n            // }\n            this.readFile(path, filename).then(documentFile => {\n              resolve(documentFile);\n            }).catch(err => {\n              reject(err);\n            });\n          }).catch(err => {\n            reject(err);\n          });\n        }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  readFile(path, filename) {\n    return new Promise((resolve, reject) => {\n      this.file.readAsDataURL(path, filename)\n        .then(res => {\n          const documentFile: CameraPhotoFile = {\n            file: path + '/' + filename,\n            src: res,\n            filename,\n            path\n          };\n          resolve(documentFile);\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  copyFile(path: string, fileName: string, newPath: string, newFileName: string) {\n    return new Promise((resolve, reject) => {\n      this.file.copyFile(path, fileName, newPath, newFileName.split(' ').join('_'))\n        .then(() => {\n          resolve(newFileName);\n        }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n}\n","import {Component, Input, OnDestroy, OnInit} from '@angular/core';\nimport {DocumentService} from '../../../services/v1/document.service';\nimport {Document} from '../../../interfaces/Document';\nimport {FormControl} from '@angular/forms';\nimport {ModalController} from '@ionic/angular';\nimport {CameraService} from '../../../services/utils/camera.service';\nimport {Storage} from '@ionic/storage';\nimport {HttpUploadFileService} from '../../../services/utils/http-upload-file.service';\nimport {ToastComponent} from '../../../components/toast/toast.component';\nimport {CameraPhotoFile} from '../../../interfaces/CameraPhotoFile';\nimport {ImageDetailComponent} from '../../../components/modals/image-detail/image-detail.component';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {AuthService} from '../../../services/v1/auth.service';\nimport {FileChooserService} from '../../../services/utils/file-chooser.service';\n\n@Component({\n  selector: 'app-document-file-form',\n  templateUrl: './document-file-form.page.html',\n  styleUrls: ['./document-file-form.page.scss'],\n})\nexport class DocumentFileFormPage implements OnInit, OnDestroy {\n  @Input() documentTypeId: number;\n  documents: Document[] = [];\n  documentFormControl = new FormControl();\n  loading = false;\n\n  files: CameraPhotoFile[] = [];\n  documentFiles: CameraPhotoFile[] = [];\n  uploadedDocumentId: number;\n\n  uploadedFilesIndexes: number[] = [];\n  uploadingErrorFilesIndexes: number[] = [];\n  uploadingFileIndex: number;\n\n  uploadedDocumentFilesIndexes: number[] = [];\n  uploadingErrorDocumentFilesIndexes: number[] = [];\n  uploadingDocumentFileIndex: number;\n\n  authToken: string;\n  submitting = false;\n  documentsUpdated = false;\n\n  constructor(private documentService: DocumentService,\n              private modalController: ModalController,\n              private cameraService: CameraService,\n              public sanitizer: DomSanitizer,\n              private httpUploadFileService: HttpUploadFileService,\n              private storage: Storage,\n              private authService: AuthService,\n              private toastComponent: ToastComponent,\n              private fileChooserService: FileChooserService) {\n  }\n\n  ngOnInit() {\n    this.getDocumentsByDocumentType();\n\n    this.authService.getAuthToken().then(authToken => {\n      this.authToken = authToken;\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.documentsUpdated) {\n      this.documentService.setUpdatedDocuments$(this.documentsUpdated);\n    }\n  }\n\n  getDocumentsByDocumentType() {\n    this.loading = true;\n    this.documentService.getDocumentsByDocumentType(this.documentTypeId)\n      .subscribe((response: any) => {\n        this.documents = response.documents;\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n      });\n  }\n\n  takePicture() {\n    this.cameraService.takePicture().then((cameraPhotoFile: CameraPhotoFile) => {\n      this.files.push(cameraPhotoFile);\n    }).catch(err => {\n      this.toastComponent.presentToast(\n        `No se pudo acceder a la cÃ¡mara (error: ${err})`,\n        'middle',\n        3000,\n      );\n    });\n  }\n\n\n  chooseFile() {\n    this.fileChooserService.chooseFile().then((documentFile: CameraPhotoFile) => {\n      this.documentFiles.push(documentFile);\n    }).catch(err => {\n      alert(JSON.stringify(err));\n      this.toastComponent.presentToast(\n        `No se pudo seleccionar el archivo (error: ${err})`,\n        'middle',\n        3000,\n      );\n    });\n  }\n\n  async viewControlImageDetail(file: CameraPhotoFile) {\n    const modal = await this.modalController.create({\n      component: ImageDetailComponent,\n      componentProps: {file}\n    });\n    await modal.present();\n  }\n\n  deleteImage(i) {\n    this.files.splice(i, 1);\n  }\n\n  deleteDocumentFile(i) {\n    this.documentFiles.splice(i, 1);\n  }\n\n  submit() {\n    const body = {\n      document_id: this.documentFormControl.value\n    };\n    this.documentService.storeUploadedDocument(body)\n      .subscribe((response: any) => {\n        this.documentsUpdated = true;\n        this.uploadedDocumentId = response.uploaded_document.id;\n        if (this.files.length > 0 || this.documentFiles.length > 0) {\n          this.checkFiles();\n        } else {\n          this.closeModal();\n        }\n      }, error => {\n\n      }, () => {\n\n      });\n  }\n\n  checkFiles() {\n    this.uploadedFilesIndexes = [];\n    this.uploadingErrorFilesIndexes = [];\n\n    this.uploadedDocumentFilesIndexes = [];\n    this.uploadingErrorDocumentFilesIndexes = [];\n\n    this.uploadFiles().then(() => {\n      this.closeModal();\n    });\n  }\n\n  closeModal() {\n    this.submitting = false;\n    this.dismiss(true);\n  }\n\n  async uploadFiles() {\n    let i = 0;\n    this.uploadingFileIndex = i;\n    for (const file of this.files) {\n      await this.uploadFile(file.file)\n        .then(() => {\n          this.uploadedFilesIndexes.push(i);\n        })\n        .catch(err => {\n          this.uploadingErrorFilesIndexes.push(i);\n        }).finally(() => {\n          i++;\n          this.uploadingFileIndex = i;\n        });\n    }\n\n    for (const file of this.documentFiles) {\n      await this.uploadFile(file.file)\n        .then(() => {\n          this.uploadedDocumentFilesIndexes.push(i);\n        })\n        .catch(err => {\n          this.uploadingErrorDocumentFilesIndexes.push(i);\n        }).finally(() => {\n          i++;\n          this.uploadingDocumentFileIndex = i;\n        });\n    }\n  }\n\n  uploadFile(file): Promise<any> {\n    return new Promise((resolve, reject) => {\n      const body = {\n        uploaded_document_id: this.uploadedDocumentId.toString()\n      };\n      this.httpUploadFileService.uploadFile('document-files', file, this.authToken, body)\n        .then(() => {\n          resolve(true);\n        })\n        .catch(err => {\n          reject(err);\n          this.toastComponent.presentToast('No se pudo cargar el archivo. Intente nuevamente', 'medium', 2500);\n        });\n    });\n  }\n\n  dismiss(success) {\n    this.modalController.dismiss({success});\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"dismiss(false)\">\n        <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>CARGAR DOCUMENTO</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-progress-bar class=\"ion-margin-top\"\n                    type=\"indeterminate\"\n                    *ngIf=\"loading\">\n  </ion-progress-bar>\n\n  <ion-list *ngIf=\"!loading\">\n    <ion-radio-group [formControl]=\"documentFormControl\">\n      <ion-list-header>\n        Tipo de documento\n      </ion-list-header>\n\n      <ion-item lines=\"none\" *ngFor=\"let document of documents\">\n        <ion-label>{{document.name}}</ion-label>\n        <ion-radio [value]=\"document.id\"></ion-radio>\n      </ion-item>\n    </ion-radio-group>\n  </ion-list>\n\n  <div class=\"ion-text-center\" *ngIf=\"!loading\">\n    <ion-button class=\"custom-secondary-button\" (click)=\"takePicture()\">\n      <ion-icon name=\"camera\"></ion-icon>\n      Tomar foto\n    </ion-button>\n\n    <ion-button class=\"custom-secondary-button\" (click)=\"chooseFile()\">\n      <ion-icon name=\"document-attach\"></ion-icon>\n      Seleccionar documento\n    </ion-button>\n  </div>\n\n  <ion-grid>\n    <ion-row class=\"ion-text-center\">\n      <ion-col size=\"6\" *ngFor=\"let file of files; let i=index\">\n        <img class=\"control-image\"\n             (click)=\"viewControlImageDetail(file)\"\n             [src]=\"sanitizer.bypassSecurityTrustUrl(file.src)\"\n             alt=\"control-image\">\n        <ion-icon name=\"trash\" class=\"delete-icon\" (click)=\"deleteImage(i)\"\n                  *ngIf=\"uploadedFilesIndexes.indexOf(i) <= -1\">\n        </ion-icon>\n        <ion-icon name=\"checkmark\" class=\"checkmark-icon\" color=\"success\"\n                  *ngIf=\"uploadedFilesIndexes.indexOf(i) > -1\">\n        </ion-icon>\n        <ion-progress-bar type=\"indeterminate\" *ngIf=\"uploadingFileIndex === i\">\n        </ion-progress-bar>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <ion-grid>\n    <ion-row *ngFor=\"let file of documentFiles; let i=index\">\n      <ion-col size=\"9\" >\n        <ion-label>\n          {{file.filename}}\n        </ion-label>\n\n        <ion-progress-bar type=\"indeterminate\" *ngIf=\"uploadingFileIndex === i\">\n        </ion-progress-bar>\n      </ion-col>\n\n      <ion-col size=\"3\">\n        <ion-icon name=\"trash\" (click)=\"deleteDocumentFile(i)\"\n                  *ngIf=\"uploadedDocumentFilesIndexes.indexOf(i) <= -1\">\n        </ion-icon>\n        <ion-icon name=\"checkmark\" color=\"success\"\n                  *ngIf=\"uploadedDocumentFilesIndexes.indexOf(i) > -1\">\n        </ion-icon>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <div class=\"ion-padding ion-text-center\">\n    <ion-progress-bar *ngIf=\"submitting\" type=\"indeterminate\">\n    </ion-progress-bar>\n    <ion-button class=\"custom-button\"\n                [disabled]=\"!documentFormControl.value || submitting\"\n                (click)=\"submit()\">\n      Aceptar\n    </ion-button>\n  </div>\n</ion-content>\n","import {Injectable} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {UploadedDocument} from '../../interfaces/UploadedDocument';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocumentService {\n  API_URL = environment.API_URL;\n  V1 = 'v1/app/';\n\n  private updatedDocuments$ = new BehaviorSubject<boolean>(false);\n\n  constructor(private http: HttpClient) {\n  }\n\n  getDocumentTypes() {\n    return this.http.get(`${this.API_URL}${this.V1}document-types`);\n  }\n\n  getDocumentsByDocumentType(documentType) {\n    return this.http.get(`${this.API_URL}${this.V1}document-types/${documentType}/documents`);\n  }\n\n  getUploadedDocuments() {\n    return this.http.get(`${this.API_URL}${this.V1}uploaded-documents`);\n  }\n\n  storeUploadedDocument(body) {\n    return this.http.post(`${this.API_URL}${this.V1}uploaded-documents`, body);\n  }\n\n  deleteUploadedDocument(uploadedDocument: UploadedDocument) {\n    return this.http.delete(`${this.API_URL}${this.V1}uploaded-documents/${uploadedDocument.id}`);\n  }\n\n  getUpdatedDocuments$(): Observable<boolean> {\n    return this.updatedDocuments$.asObservable();\n  }\n\n  setUpdatedDocuments$(updated: boolean) {\n    this.updatedDocuments$.next(updated);\n  }\n}\n"],"sourceRoot":"webpack:///"}