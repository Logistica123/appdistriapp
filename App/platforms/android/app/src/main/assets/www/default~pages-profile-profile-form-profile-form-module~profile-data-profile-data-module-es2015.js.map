{"version":3,"sources":["./src/app/pages/profile/profile-form/profile-form.page.ts","./src/app/pages/profile/profile-form/profile-form.page.html"],"names":[],"mappings":"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","file":"default~pages-profile-profile-form-profile-form-module~profile-data-profile-data-module-es2015.js","sourcesContent":["import {Component, Input, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {ModalController} from '@ionic/angular';\nimport {Driver} from '../../../interfaces/Driver';\nimport {DriverService} from '../../../services/v1/driver.service';\n\n@Component({\n  selector: 'app-profile-form',\n  templateUrl: './profile-form.page.html',\n  styleUrls: ['./profile-form.page.scss'],\n})\nexport class ProfileFormPage implements OnInit {\n  form: FormGroup;\n  @Input() driver: Driver;\n  showInputErrorMessage = false;\n\n  constructor(private formBuilder: FormBuilder,\n              private modalController: ModalController,\n              private driverService: DriverService) {\n    this.form = this.formBuilder.group({\n      city: ['', Validators.required],\n      phone_number: ['', Validators.required],\n      bank_cbu: ['', Validators.pattern('^(\\\\s*|\\\\d{22})$')],\n      bank_owner_is_driver: [true],\n      bank_holder_name: ['', Validators.maxLength(255)],\n      company: [''],\n      license_plate: ['', Validators.required],\n    });\n  }\n\n  ngOnInit() {\n    this.setDriver();\n  }\n\n  submit() {\n    if (this.form.valid) {\n      this.showInputErrorMessage = false;\n      this.updateProfile();\n    } else {\n      this.showInputErrorMessage = true;\n    }\n  }\n\n  updateProfile() {\n    const body = this.setBody();\n    this.driverService.updateProfile(body)\n      .subscribe(() => {\n        this.dismiss(true);\n      });\n  }\n\n  setDriver() {\n    this.form.controls.phone_number.setValue(this.driver.phone_number);\n    this.form.controls.city.setValue(this.driver.city);\n    this.form.controls.company.setValue(this.driver.company);\n    this.form.controls.bank_cbu.setValue(this.driver.bank_cbu || '');\n    this.form.controls.bank_owner_is_driver.setValue(this.driver.bank_owner_is_driver !== undefined ? this.driver.bank_owner_is_driver : true);\n    this.form.controls.bank_holder_name.setValue(this.driver.bank_holder_name || '');\n    this.form.controls.license_plate.setValue(this.driver.license_plate);\n  }\n\n  setBody() {\n    return {\n      city: this.form.value.city,\n      phone_number: this.form.value.phone_number,\n      company: this.form.value.company,\n      license_plate: this.form.value.license_plate,\n      bank_cbu: this.form.value.bank_cbu ? this.form.value.bank_cbu.replace(/\\s+/g, '') : null,\n      bank_owner_is_driver: this.form.value.bank_owner_is_driver,\n      bank_holder_name: this.form.value.bank_owner_is_driver ? null : (this.form.value.bank_holder_name ? this.form.value.bank_holder_name.trim() : null),\n    };\n  }\n\n  dismiss(success) {\n    this.modalController.dismiss({success});\n  }\n\n  onBankOwnerToggle(event: any) {\n    if (event?.detail?.checked) {\n      this.form.controls.bank_holder_name.setValue('');\n    }\n  }\n\n}\n\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"dismiss(false)\">\n        <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Editar perfil</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"profile-modal\">\n  <form [formGroup]=\"form\" class=\"profile-form\">\n    <div class=\"modal-card\">\n      <section class=\"section-card\">\n        <div class=\"section-header\">\n          <ion-icon name=\"person-circle-outline\"></ion-icon>\n          <h5>Datos de conductor</h5>\n        </div>\n\n        <div class=\"field-row\">\n          <div class=\"field-group\">\n            <label for=\"city\">Ciudad</label>\n            <input id=\"city\" type=\"text\" formControlName=\"city\">\n            <p class=\"ion-no-margin form-error-message\"\n               *ngIf=\"form.controls.city.invalid && showInputErrorMessage\">\n              Este campo es requerido\n            </p>\n          </div>\n          <div class=\"field-group\">\n            <label for=\"phone_number\">Teléfono</label>\n            <input id=\"phone_number\" type=\"text\" formControlName=\"phone_number\">\n            <p class=\"ion-no-margin form-error-message\"\n               *ngIf=\"form.controls.phone_number.invalid && showInputErrorMessage\">\n              Este campo es requerido\n            </p>\n          </div>\n        </div>\n      </section>\n\n      <section class=\"section-card\">\n        <div class=\"section-header\">\n          <ion-icon name=\"card-outline\"></ion-icon>\n          <h5>Datos bancarios</h5>\n        </div>\n\n        <div class=\"field-group toggle-group\">\n          <div>\n            <span class=\"toggle-label\">¿El CBU pertenece al conductor?</span>\n            <small class=\"toggle-hint\">Si el CBU es de otra persona, completá los datos del titular.</small>\n          </div>\n          <ion-toggle formControlName=\"bank_owner_is_driver\" (ionChange)=\"onBankOwnerToggle($event)\"></ion-toggle>\n        </div>\n\n        <div class=\"field-group\" *ngIf=\"!form.value.bank_owner_is_driver\">\n          <label for=\"bank_holder_name\">Nombre del titular</label>\n          <input id=\"bank_holder_name\" type=\"text\" formControlName=\"bank_holder_name\">\n        </div>\n\n        <div class=\"field-group\">\n          <label for=\"bank_cbu\">CBU (22 dígitos)</label>\n          <input id=\"bank_cbu\" type=\"text\" formControlName=\"bank_cbu\" inputmode=\"numeric\" maxlength=\"22\">\n          <ion-note color=\"medium\" class=\"hint\">\n            Ingresá los 22 dígitos sin espacios, guiones ni caracteres especiales.\n          </ion-note>\n          <p class=\"ion-no-margin form-error-message\"\n             *ngIf=\"form.controls.bank_cbu.invalid && form.controls.bank_cbu.value && showInputErrorMessage\">\n            Debe contener 22 dígitos\n          </p>\n        </div>\n      </section>\n\n      <section class=\"section-card\">\n        <div class=\"section-header\">\n          <ion-icon name=\"business-outline\"></ion-icon>\n          <h5>Información laboral</h5>\n        </div>\n\n        <div class=\"field-row\">\n          <div class=\"field-group\">\n            <label for=\"company\">Empresa</label>\n            <input id=\"company\" type=\"text\" formControlName=\"company\">\n          </div>\n          <div class=\"field-group\">\n            <label for=\"license_plate\">Matrícula</label>\n            <input id=\"license_plate\" type=\"text\" formControlName=\"license_plate\">\n            <p class=\"ion-no-margin form-error-message\"\n               *ngIf=\"form.controls.license_plate.invalid && showInputErrorMessage\">\n              Este campo es requerido\n            </p>\n          </div>\n        </div>\n      </section>\n    </div>\n\n    <div class=\"actions\">\n      <ion-button class=\"custom-button\" expand=\"block\" (click)=\"submit()\">\n        Guardar cambios\n      </ion-button>\n    </div>\n  </form>\n</ion-content>\n"],"sourceRoot":"webpack:///"}