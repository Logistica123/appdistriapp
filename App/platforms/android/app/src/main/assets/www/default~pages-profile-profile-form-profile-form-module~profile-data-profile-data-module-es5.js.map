{"version":3,"sources":["webpack:///src/app/pages/profile/profile-form/profile-form.page.ts","webpack:///src/app/pages/profile/profile-form/profile-form.page.html","webpack:///src/app/services/v1/geocode.service.ts"],"names":["ProfileFormPage","formBuilder","modalController","driverService","geocodeService","geolocation","toastComponent","showInputErrorMessage","geocodingStart","gettingCurrentLocation","form","group","city","required","phone_number","company","car_make","car_model","tonnage","license_plate","cost_per_km","cost_per_hour","start_address","start_lat","start_lng","ngOnInit","setDriver","submit","valid","updateProfile","body","setBody","subscribe","response","dismiss","controls","setValue","driver","undefined","value","Number","geocodeStartAddress","address","presentToast","country","mapQuestGeocode","then","coords","setStartCoords","lat","lng","GMGeocodeAddress","useCurrentLocation","getCurrentPosition","enableHighAccuracy","timeout","position","latitude","longitude","toFixed","success","GeocodeService","ngZone","http","addressToGeocode","Promise","resolve","reject","geocodeMapQuestAddress","data","results","length","locations","latLng","error","self","geocoder","google","maps","Geocoder","geocode","status","GeocoderStatus","OK","run","geometry","location","ZERO_RESULTS","key","mapquest","endpoint","url","get"],"mappings":"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","file":"default~pages-profile-profile-form-profile-form-module~profile-data-profile-data-module-es5.js","sourcesContent":["import {Component, Input, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\nimport {ModalController} from '@ionic/angular';\nimport {Geolocation} from '@ionic-native/geolocation/ngx';\nimport {Driver} from '../../../interfaces/Driver';\nimport {DriverService} from '../../../services/v1/driver.service';\nimport {GeocodeService} from '../../../services/v1/geocode.service';\nimport {ToastComponent} from '../../../components/toast/toast.component';\n\n@Component({\n  selector: 'app-profile-form',\n  templateUrl: './profile-form.page.html',\n  styleUrls: ['./profile-form.page.scss'],\n})\nexport class ProfileFormPage implements OnInit {\n  form: FormGroup;\n  @Input() driver: Driver;\n  showInputErrorMessage = false;\n\n  geocodingStart = false;\n  gettingCurrentLocation = false;\n\n  constructor(private formBuilder: FormBuilder,\n              private modalController: ModalController,\n              private driverService: DriverService,\n              private geocodeService: GeocodeService,\n              private geolocation: Geolocation,\n              private toastComponent: ToastComponent) {\n    this.form = this.formBuilder.group({\n      city: ['', Validators.required],\n      phone_number: ['', Validators.required],\n      company: ['', Validators.required],\n      car_make: ['', Validators.required],\n      car_model: ['', Validators.required],\n      tonnage: ['', Validators.required],\n      license_plate: ['', Validators.required],\n      cost_per_km: ['', Validators.required],\n      cost_per_hour: ['', Validators.required],\n      start_address: ['', Validators.required],\n      start_lat: ['', Validators.required],\n      start_lng: ['', Validators.required],\n    });\n  }\n\n  ngOnInit() {\n    this.setDriver();\n  }\n\n  submit() {\n    if (this.form.valid) {\n      this.showInputErrorMessage = false;\n      this.updateProfile();\n    } else {\n      this.showInputErrorMessage = true;\n    }\n  }\n\n  updateProfile() {\n    const body = this.setBody();\n    this.driverService.updateProfile(body)\n      .subscribe((response: any) => {\n        this.dismiss(true);\n      });\n  }\n\n  setDriver() {\n    this.form.controls.phone_number.setValue(this.driver.phone_number);\n    this.form.controls.city.setValue(this.driver.city);\n    this.form.controls.company.setValue(this.driver.company);\n    this.form.controls.car_make.setValue(this.driver.car_make);\n    this.form.controls.car_model.setValue(this.driver.car_model);\n    this.form.controls.tonnage.setValue(this.driver.tonnage);\n    this.form.controls.license_plate.setValue(this.driver.license_plate);\n    this.form.controls.cost_per_hour.setValue(this.driver.cost_per_hour);\n    this.form.controls.cost_per_km.setValue(this.driver.cost_per_km);\n    this.form.controls.start_address.setValue(this.driver.start_address || '');\n    this.form.controls.start_lat.setValue(this.driver.start_lat !== undefined && this.driver.start_lat !== null ? this.driver.start_lat : '');\n    this.form.controls.start_lng.setValue(this.driver.start_lng !== undefined && this.driver.start_lng !== null ? this.driver.start_lng : '');\n  }\n\n  setBody() {\n    return {\n      city: this.form.value.city,\n      phone_number: this.form.value.phone_number,\n      company: this.form.value.company,\n      car_make: this.form.value.car_make,\n      car_model: this.form.value.car_model,\n      tonnage: this.form.value.tonnage,\n      license_plate: this.form.value.license_plate,\n      cost_per_hour: this.form.value.cost_per_hour,\n      cost_per_km: this.form.value.cost_per_km,\n      start_address: this.form.value.start_address,\n      start_lat: this.form.value.start_lat !== '' ? Number(this.form.value.start_lat) : null,\n      start_lng: this.form.value.start_lng !== '' ? Number(this.form.value.start_lng) : null,\n    };\n  }\n\n  geocodeStartAddress() {\n    const address = this.form.value.start_address;\n    if (!address) {\n      this.toastComponent.presentToast('Ingrese una dirección válida', 'middle', 2500);\n      return;\n    }\n\n    const country = 'Argentina';\n    this.geocodingStart = true;\n    this.geocodeService.mapQuestGeocode(address, country).then(coords => {\n      this.setStartCoords(coords.lat, coords.lng);\n      this.toastComponent.presentToast('Coordenadas actualizadas', 'middle', 2000);\n      this.geocodingStart = false;\n    }).catch(() => {\n      this.geocodeService.GMGeocodeAddress(address, country).then(coords => {\n        this.setStartCoords(coords.lat, coords.lng);\n        this.toastComponent.presentToast('Coordenadas actualizadas', 'middle', 2000);\n        this.geocodingStart = false;\n      }).catch(() => {\n        this.geocodingStart = false;\n        this.toastComponent.presentToast('No se pudo geocodificar la dirección', 'middle', 2500);\n      });\n    });\n  }\n\n  useCurrentLocation() {\n    this.gettingCurrentLocation = true;\n    this.geolocation.getCurrentPosition({enableHighAccuracy: true, timeout: 10000})\n      .then(position => {\n        this.setStartCoords(position.coords.latitude, position.coords.longitude);\n        this.toastComponent.presentToast('Ubicación actual establecida', 'middle', 2000);\n        this.gettingCurrentLocation = false;\n      }).catch(() => {\n        this.toastComponent.presentToast('No se pudo obtener la ubicación actual', 'middle', 2500);\n        this.gettingCurrentLocation = false;\n      });\n  }\n\n  private setStartCoords(lat: number, lng: number) {\n    this.form.controls.start_lat.setValue(Number(lat).toFixed(6));\n    this.form.controls.start_lng.setValue(Number(lng).toFixed(6));\n  }\n\n  dismiss(success) {\n    this.modalController.dismiss({success});\n  }\n\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"dismiss(false)\">\n        <ion-icon slot=\"icon-only\" name=\"close\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>Editar perfil</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <form [formGroup]=\"form\">\n    <ion-grid>\n      <ion-row>\n        <ion-col size=\"12\" class=\"ion-text-center\">\n          <h5>Datos de conductor</h5>\n        </ion-col>\n      </ion-row>\n\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-label>Ciudad</ion-label>\n          <input type=\"text\" formControlName=\"city\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.city.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Teléfono</ion-label>\n          <input type=\"text\" formControlName=\"phone_number\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.car_make.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"12\">\n          <ion-label>Empresa</ion-label>\n          <input type=\"text\" formControlName=\"company\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.company.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Valor por hora</ion-label>\n          <input type=\"tel\" inputmode=\"numeric\" pattern=\"[0-9]+(\\.[0-9][0-9]?)?\" formControlName=\"cost_per_hour\">\n          <p class=\"ion-no-margin form-error-message\"\n             *ngIf=\"form.controls.cost_per_hour.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Valor por kilómetro</ion-label>\n          <input type=\"tel\" inputmode=\"numeric\" pattern=\"[0-9]+(\\.[0-9][0-9]?)?\" formControlName=\"cost_per_km\">\n          <p class=\"ion-no-margin form-error-message\"\n             *ngIf=\"form.controls.cost_per_km.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n      </ion-row>\n\n      <ion-row class=\"ion-margin-top\">\n        <ion-col size=\"12\" class=\"ion-text-center\">\n          <h5>Punto de partida</h5>\n        </ion-col>\n      </ion-row>\n\n      <ion-row>\n        <ion-col size=\"12\">\n          <ion-label>Dirección base</ion-label>\n          <input type=\"text\" formControlName=\"start_address\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.start_address.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Latitud</ion-label>\n          <input type=\"number\" formControlName=\"start_lat\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.start_lat.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Longitud</ion-label>\n          <input type=\"number\" formControlName=\"start_lng\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.start_lng.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n      </ion-row>\n\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-button expand=\"block\" type=\"button\" (click)=\"geocodeStartAddress()\" [disabled]=\"geocodingStart\">\n            <ion-spinner slot=\"start\" *ngIf=\"geocodingStart\"></ion-spinner>\n            Buscar por dirección\n          </ion-button>\n        </ion-col>\n        <ion-col size=\"6\">\n          <ion-button expand=\"block\" type=\"button\" (click)=\"useCurrentLocation()\" [disabled]=\"gettingCurrentLocation\">\n            <ion-spinner slot=\"start\" *ngIf=\"gettingCurrentLocation\"></ion-spinner>\n            Usar ubicación actual\n          </ion-button>\n        </ion-col>\n      </ion-row>\n\n      <ion-row class=\"ion-margin-top\">\n        <ion-col size=\"12\" class=\"ion-text-center\">\n          <h5>Datos de unidad de transporte</h5>\n        </ion-col>\n      </ion-row>\n\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-label>Marca unidad</ion-label>\n          <input type=\"text\" formControlName=\"car_make\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.car_make.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Modelo unidad</ion-label>\n          <input type=\"text\" formControlName=\"car_model\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.car_model.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Tonelaje</ion-label>\n          <input type=\"text\" formControlName=\"tonnage\">\n          <p class=\"ion-no-margin form-error-message\" *ngIf=\"form.controls.tonnage.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n\n        <ion-col size=\"6\">\n          <ion-label>Matrícula</ion-label>\n          <input type=\"text\" formControlName=\"license_plate\">\n          <p class=\"ion-no-margin form-error-message\"\n             *ngIf=\"form.controls.license_plate.invalid && showInputErrorMessage\">\n            Este campo es requerido\n          </p>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n  </form>\n\n  <div class=\"ion-text-center ion-padding\">\n    <ion-button class=\"custom-button\" (click)=\"submit()\">\n      Aceptar\n    </ion-button>\n  </div>\n</ion-content>\n","import {Injectable, NgZone} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GeocodeService {\n  results: any;\n\n  constructor(private ngZone: NgZone,\n              private http: HttpClient) {\n  }\n\n  mapQuestGeocode(addressToGeocode, country): Promise<{lat: number; lng: number}> {\n    return new Promise((resolve, reject) => {\n      const address = `${addressToGeocode},${country}`;\n      this.geocodeMapQuestAddress(address)\n        .subscribe((response: any) => {\n          const data = response;\n          if (data.results && data.results.length > 0) {\n            if (data.results[0].locations && data.results[0].locations.length > 0) {\n              if (data.results[0].locations[0].latLng) {\n                const lat = data.results[0].locations[0].latLng.lat;\n                const lng = data.results[0].locations[0].latLng.lng;\n            resolve({lat, lng});\n          }\n            }\n          } else {\n            reject();\n          }\n        }, error => {\n          reject(error);\n        });\n    });\n  }\n\n  GMGeocodeAddress(addressToGeocode, country): Promise<{lat: number; lng: number}> {\n    return new Promise((resolve, reject) => {\n      const self = this;\n      const address = `${addressToGeocode},${country}`;\n      const geocoder = new google.maps.Geocoder();\n      // tslint:disable-next-line:only-arrow-functions\n      geocoder.geocode({address}, (results, status) => {\n        if (status === google.maps.GeocoderStatus.OK) {\n          self.ngZone.run(() => {\n            self.results = results;\n            const lat = results[0].geometry.location.lat();\n            const lng = results[0].geometry.location.lng();\n            resolve({lat, lng});\n          });\n        } else {\n          reject(status);\n          // alert('Geocode was not successful for the following reason: ' + status);\n          if (status === google.maps.GeocoderStatus.ZERO_RESULTS) {\n            // self.toastComponent.presentToast('El API de Google Maps no encontró resultados');\n          }\n        }\n      });\n    });\n  }\n\n  geocodeMapQuestAddress(address) {\n    const key = environment.mapquest.key;\n    const endpoint = 'http://www.mapquestapi.com/geocoding/v1/address';\n    const url = `${endpoint}?key=${key}&location=${address}&thumbMaps=false&boundingBox=-21.357261,-74.723118,-57.6807156,-41.57098356&maxResults=1`;\n    return this.http.get(`${url}`);\n  }\n}\n"]}