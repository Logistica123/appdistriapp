{"version":3,"sources":["./src/app/pages/maintenance/document-list/document-list-routing.module.ts","./src/app/services/v1/document.service.ts","./src/app/pages/maintenance/document-list/document-list.module.ts","./src/app/pages/maintenance/document-list/document-list.page.ts","./src/app/pages/maintenance/document-list/document-list.page.html"],"names":[],"mappings":"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","file":"pages-maintenance-document-list-document-list-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DocumentListPage } from './document-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DocumentListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DocumentListPageRoutingModule {}\n","import {Injectable} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient, HttpParams} from '@angular/common/http';\nimport {BehaviorSubject, Observable, forkJoin, of, throwError} from 'rxjs';\nimport {map, tap} from 'rxjs/operators';\nimport {UploadedDocument} from '../../interfaces/UploadedDocument';\n\nexport interface PersonalPersonaSummary {\n  id: number;\n  nombre: string | null;\n  email: string;\n}\n\nexport interface PersonalLiquidacion {\n  id: number;\n  nombre: string;\n  downloadUrl: string | null;\n  absoluteDownloadUrl: string | null;\n  mime: string | null;\n  size: number | null;\n  sizeLabel: string | null;\n  fechaCarga: string | null;\n  fechaVencimiento: string | null;\n  tipoNombre: string | null;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocumentService {\n  API_URL = environment.API_URL;\n  PERSONAL_API_URL = environment.PERSONAL_API_URL;\n  V1 = 'v1/app/';\n\n  private updatedDocuments$ = new BehaviorSubject<boolean>(false);\n  private personaSubject$ = new BehaviorSubject<PersonalPersonaSummary | null>(null);\n\n  constructor(private http: HttpClient) {\n  }\n\n  getUpdatedDocuments$(): Observable<boolean> {\n    return this.updatedDocuments$.asObservable();\n  }\n\n  setUpdatedDocuments$(updated: boolean) {\n    this.updatedDocuments$.next(updated);\n  }\n\n  getPersona$(): Observable<PersonalPersonaSummary | null> {\n    return this.personaSubject$.asObservable();\n  }\n\n  getPersonaSnapshot(): PersonalPersonaSummary | null {\n    return this.personaSubject$.getValue();\n  }\n\n  ensurePersonaByEmail(email: string): Observable<PersonalPersonaSummary> {\n    const normalizedEmail = (email ?? '').trim().toLowerCase();\n    if (!normalizedEmail) {\n      return throwError(() => new Error('No se pudo determinar el correo electrónico del conductor.'));\n    }\n\n    const cached = this.personaSubject$.getValue();\n    if (cached && cached.email === normalizedEmail) {\n      return of(cached);\n    }\n\n    const params = new HttpParams().set('email', normalizedEmail);\n    return this.http\n      .get<{ data?: Array<{ id: number; nombre?: string | null; nombres?: string | null; apellidos?: string | null; email?: string | null }> }>(\n        `${this.PERSONAL_API_URL}personal`,\n        { params }\n      )\n      .pipe(\n        map((response) => {\n          const persona = response?.data?.[0];\n          if (!persona) {\n            throw new Error('No se encontró un registro de personal para el correo indicado.');\n          }\n          const nombre =\n            persona.nombre\n            ?? [persona.nombres, persona.apellidos].filter(Boolean).join(' ').trim()\n            ?? persona.email\n            ?? normalizedEmail;\n\n          return {\n            id: persona.id,\n            nombre: nombre || normalizedEmail,\n            email: normalizedEmail,\n          } as PersonalPersonaSummary;\n        }),\n        tap((persona) => this.personaSubject$.next(persona))\n      );\n  }\n\n  getLiquidaciones(): Observable<PersonalLiquidacion[]> {\n    const persona = this.personaSubject$.getValue();\n    if (!persona) {\n      return throwError(() => new Error('No se ha cargado el registro de personal.'));\n    }\n\n    return this.http\n      .get<{ data?: Array<PersonalLiquidacion> }>(`${this.PERSONAL_API_URL}personal/${persona.id}/liquidaciones`)\n      .pipe(map((response) => response?.data ?? []));\n  }\n\n  uploadLiquidaciones(files: File[]): Observable<unknown[]> {\n    const persona = this.personaSubject$.getValue();\n    if (!persona) {\n      return throwError(() => new Error('No se ha cargado el registro de personal.'));\n    }\n\n    if (!files || files.length === 0) {\n      return of([]);\n    }\n\n    const uploads = files.map((file) => {\n      const formData = new FormData();\n      const safeName = file.name?.trim().length ? file.name.trim() : `liquidacion-${Date.now()}`;\n      formData.append('archivo', file, safeName);\n      formData.append('nombre', safeName);\n      formData.append('esLiquidacion', '1');\n\n      return this.http.post(`${this.PERSONAL_API_URL}personal/${persona.id}/documentos`, formData);\n    });\n\n    return forkJoin(uploads);\n  }\n\n  /**\n   * Métodos heredados que ya no forman parte del nuevo flujo.\n   * Se mantienen para evitar errores de compilación en componentes legacy.\n   */\n  getDocumentTypes(): Observable<{ document_types: any[] }> {\n    console.warn('[DocumentService] getDocumentTypes() está deprecado en el nuevo flujo de liquidaciones.');\n    return of({ document_types: [] });\n  }\n\n  getDocumentsByDocumentType(documentType: number): Observable<{ documents: any[] }> {\n    console.warn('[DocumentService] getDocumentsByDocumentType() está deprecado en el nuevo flujo de liquidaciones.', documentType);\n    return of({ documents: [] });\n  }\n\n  getUploadedDocuments(): Observable<{ uploaded_documents: any[] }> {\n    console.warn('[DocumentService] getUploadedDocuments() está deprecado en el nuevo flujo de liquidaciones.');\n    return of({ uploaded_documents: [] });\n  }\n\n  storeUploadedDocument(body: unknown): Observable<unknown> {\n    console.warn('[DocumentService] storeUploadedDocument() está deprecado en el nuevo flujo de liquidaciones.', body);\n    return throwError(() => new Error('La carga de documentos se realiza desde uploadLiquidaciones().'));\n  }\n\n  deleteUploadedDocument(uploadedDocument: UploadedDocument): Observable<unknown> {\n    console.warn('[DocumentService] deleteUploadedDocument() está deprecado en el nuevo flujo de liquidaciones.', uploadedDocument);\n    return throwError(() => new Error('La eliminación de documentos no está disponible en esta versión.'));\n  }\n}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule} from '@angular/forms';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {DocumentListPageRoutingModule} from './document-list-routing.module';\n\nimport {DocumentListPage} from './document-list.page';\nimport {ComponentsModule} from '../../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DocumentListPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [DocumentListPage]\n})\nexport class DocumentListPageModule {\n}\n","import {Component, ElementRef, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {DocumentService, PersonalLiquidacion, PersonalPersonaSummary} from '../../../services/v1/document.service';\nimport {Subscription} from 'rxjs';\nimport {Storage} from '@ionic/storage';\n\n@Component({\n  selector: 'app-document-list',\n  templateUrl: './document-list.page.html',\n  styleUrls: ['./document-list.page.scss'],\n})\nexport class DocumentListPage implements OnInit, OnDestroy {\n  @ViewChild('fileInput') fileInputRef: ElementRef<HTMLInputElement>;\n\n  liquidaciones: PersonalLiquidacion[] = [];\n  loading = true;\n  uploading = false;\n  persona: PersonalPersonaSummary | null = null;\n  selectedFiles: File[] = [];\n  errorMessage: string | null = null;\n  updatedDocumentsSubscription: Subscription;\n\n  constructor(\n    private documentService: DocumentService,\n    private storage: Storage,\n  ) {\n  }\n\n  ngOnInit() {\n    this.updatedDocumentsSubscription = this.documentService.getUpdatedDocuments$()\n      .subscribe((updated) => {\n        if (updated) {\n          this.getDocuments();\n          this.documentService.setUpdatedDocuments$(false);\n        }\n      });\n\n    this.loadPersona();\n  }\n\n  ngOnDestroy(): void {\n    if (this.updatedDocumentsSubscription) {\n      this.updatedDocumentsSubscription.unsubscribe();\n    }\n  }\n\n  get hasPersonaLoaded(): boolean {\n    return Boolean(this.persona);\n  }\n\n  private loadPersona() {\n    this.loading = true;\n    this.storage.get('senderId')\n      .then((email) => {\n        if (!email) {\n          this.errorMessage = 'No se pudo identificar al conductor. Inicia sesión nuevamente.';\n          this.loading = false;\n          return;\n        }\n\n        this.documentService.ensurePersonaByEmail(String(email))\n          .subscribe({\n            next: (persona) => {\n              this.persona = persona;\n              this.errorMessage = null;\n              this.getDocuments();\n            },\n            error: (err) => {\n              this.errorMessage = err?.message ?? 'No se pudo recuperar la información del personal.';\n              this.loading = false;\n            },\n          });\n      })\n      .catch(() => {\n        this.errorMessage = 'No se pudo acceder a la información almacenada. Inicia sesión nuevamente.';\n        this.loading = false;\n      });\n  }\n\n  getDocuments(event?: CustomEvent) {\n    if (!this.hasPersonaLoaded) {\n      this.loading = false;\n      event?.detail?.complete?.();\n      return;\n    }\n\n    this.loading = true;\n    this.documentService.getLiquidaciones()\n      .subscribe({\n        next: (liquidaciones) => {\n          this.liquidaciones = liquidaciones;\n          this.errorMessage = null;\n        },\n        error: (err) => {\n          this.errorMessage = err?.message ?? 'No se pudieron cargar las liquidaciones.';\n          this.loading = false;\n          event?.detail?.complete?.();\n        },\n        complete: () => {\n          this.loading = false;\n          event?.detail?.complete?.();\n        },\n      });\n  }\n\n  triggerFileSelection() {\n    if (!this.fileInputRef) {\n      return;\n    }\n\n    this.fileInputRef.nativeElement.click();\n  }\n\n  onFilesSelected(event: Event) {\n    const input = event.target as HTMLInputElement;\n    if (!input.files) {\n      return;\n    }\n    this.selectedFiles = Array.from(input.files);\n  }\n\n  clearSelectedFiles() {\n    this.selectedFiles = [];\n    if (this.fileInputRef) {\n      this.fileInputRef.nativeElement.value = '';\n    }\n  }\n\n  uploadSelectedFiles() {\n    if (!this.selectedFiles.length) {\n      return;\n    }\n\n    this.uploading = true;\n    this.documentService.uploadLiquidaciones(this.selectedFiles)\n      .subscribe({\n        next: () => {\n          // noop\n        },\n        error: (err) => {\n          this.errorMessage = err?.message ?? 'No se pudieron subir las liquidaciones.';\n          this.uploading = false;\n        },\n        complete: () => {\n          this.errorMessage = null;\n          this.documentService.setUpdatedDocuments$(true);\n          this.clearSelectedFiles();\n          this.uploading = false;\n        },\n      });\n  }\n\n  openLiquidacion(liquidacion: PersonalLiquidacion) {\n    const target = liquidacion.absoluteDownloadUrl || liquidacion.downloadUrl;\n    if (!target) {\n      this.errorMessage = 'No se encontró la URL de descarga para este archivo.';\n      return;\n    }\n\n    window.open(target, '_blank');\n  }\n\n  doRefresh(event: CustomEvent) {\n    this.getDocuments(event);\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-menu-button autoHide=\"false\"></ion-menu-button>\n    </ion-buttons>\n    <ion-title>MANTENIMIENTO</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content class=\"ion-padding\">\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\n    <ion-refresher-content></ion-refresher-content>\n  </ion-refresher>\n\n  <ion-progress-bar class=\"ion-margin-top\"\n                    type=\"indeterminate\"\n                    *ngIf=\"loading || uploading\">\n  </ion-progress-bar>\n\n  <ion-note class=\"ion-text-center ion-padding\" color=\"danger\"\n            *ngIf=\"!loading && errorMessage && !hasPersonaLoaded\">\n    {{ errorMessage }}\n  </ion-note>\n\n  <div class=\"ion-text-center ion-padding-bottom\">\n    <ion-button class=\"custom-button\"\n                (click)=\"triggerFileSelection()\"\n                [disabled]=\"uploading || !hasPersonaLoaded\">\n      Seleccionar archivos\n    </ion-button>\n    <ion-button color=\"primary\"\n                (click)=\"uploadSelectedFiles()\"\n                [disabled]=\"uploading || selectedFiles.length === 0 || !hasPersonaLoaded\">\n      Subir liquidaciones\n    </ion-button>\n    <ion-note class=\"ion-margin-top\" *ngIf=\"selectedFiles.length > 0\">\n      {{ selectedFiles.length }} archivo{{ selectedFiles.length === 1 ? '' : 's' }} seleccionado{{ selectedFiles.length === 1 ? '' : 's' }}.\n      <ion-button fill=\"clear\" size=\"small\" (click)=\"clearSelectedFiles()\">Limpiar</ion-button>\n    </ion-note>\n  </div>\n\n  <input #fileInput\n         type=\"file\"\n         hidden\n         multiple\n         (change)=\"onFilesSelected($event)\"\n         accept=\".pdf,.png,.jpg,.jpeg,.doc,.docx,.xls,.xlsx\">\n\n  <ion-card *ngIf=\"persona\">\n    <ion-card-header>\n      <ion-card-title>Liquidaciones de {{ persona?.nombre }}</ion-card-title>\n    </ion-card-header>\n    <ion-card-content>\n      <ion-note *ngIf=\"errorMessage && (!liquidaciones || liquidaciones.length === 0)\">\n        {{ errorMessage }}\n      </ion-note>\n\n      <ion-list *ngIf=\"!loading && liquidaciones.length > 0\">\n        <ion-item *ngFor=\"let liquidacion of liquidaciones\">\n          <ion-label>\n            <h2>{{ liquidacion.nombre }}</h2>\n            <p *ngIf=\"liquidacion.tipoNombre\">{{ liquidacion.tipoNombre }}</p>\n            <p>\n              {{ liquidacion.fechaCarga ? (liquidacion.fechaCarga | date:'dd/MM/yyyy') : 'Sin fecha' }}\n              <span *ngIf=\"liquidacion.sizeLabel\"> · {{ liquidacion.sizeLabel }}</span>\n            </p>\n          </ion-label>\n          <ion-button fill=\"clear\" slot=\"end\" (click)=\"openLiquidacion(liquidacion)\">\n            <ion-icon slot=\"icon-only\" name=\"download\"></ion-icon>\n          </ion-button>\n        </ion-item>\n      </ion-list>\n\n      <ion-note *ngIf=\"!loading && liquidaciones.length === 0 && !errorMessage\">\n        Aún no hay liquidaciones cargadas. Seleccioná archivos para subirlos.\n      </ion-note>\n    </ion-card-content>\n  </ion-card>\n\n  <ion-note class=\"ion-text-center ion-padding\" color=\"danger\"\n            *ngIf=\"!loading && errorMessage && liquidaciones.length > 0\">\n    {{ errorMessage }}\n  </ion-note>\n</ion-content>\n"],"sourceRoot":"webpack:///"}