{"version":3,"sources":["./src/app/pages/controls/toll-controls/toll-control-list/toll-control-list-routing.module.ts","./src/app/pages/controls/toll-controls/toll-control-list/toll-control-list.module.ts","./src/app/pages/controls/toll-controls/toll-control-list/toll-control-list.page.ts","./src/app/pages/controls/toll-controls/toll-control-list/toll-control-list.page.html"],"names":[],"mappings":"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","file":"toll-controls-toll-control-list-toll-control-list-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TollControlListPage } from './toll-control-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TollControlListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TollControlListPageRoutingModule {}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {TollControlListPageRoutingModule} from './toll-control-list-routing.module';\n\nimport {TollControlListPage} from './toll-control-list.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    TollControlListPageRoutingModule\n  ],\n  declarations: [TollControlListPage]\n})\nexport class TollControlListPageModule {\n}\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {AlertController, ModalController} from '@ionic/angular';\nimport {TollControlService} from '../../../../services/v1/toll-control.service';\nimport {TollControl} from '../../../../interfaces/TollControl';\nimport {TollControlFormPage} from '../toll-control-form/toll-control-form.page';\nimport {FormControl} from '@angular/forms';\n\n@Component({\n  selector: 'app-toll-control-list',\n  templateUrl: './toll-control-list.page.html',\n  styleUrls: ['./toll-control-list.page.scss'],\n})\nexport class TollControlListPage implements OnInit, AfterViewInit {\n  loading = true;\n  submitting = false;\n  tollControls: TollControl[] = [];\n  date = new Date();\n  dateFC = new FormControl();\n\n  constructor(private modalController: ModalController,\n              private alertController: AlertController,\n              private tollControlService: TollControlService) {\n  }\n\n  ngOnInit() {\n    //\n  }\n\n  ngAfterViewInit() {\n    this.date = new Date();\n    this.dateFC.setValue(this.date.toISOString());\n    this.getTollControls();\n  }\n\n  onDateChange(event) {\n    this.date = new Date(event.detail.value);\n    this.getTollControls();\n  }\n\n  getTollControls() {\n    this.loading = true;\n    const month = this.date.getMonth() + 1;\n    const year = this.date.getFullYear();\n    this.tollControlService.getTollControls(month, year)\n      .subscribe((response: any) => {\n        this.tollControls = response.toll_controls;\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n      });\n  }\n\n  async addTollControl() {\n    const modal = await this.modalController.create({\n      component: TollControlFormPage,\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data && data.success) {\n      this.getTollControls();\n    }\n  }\n\n  async editTollControl(tollControl: TollControl) {\n    const modal = await this.modalController.create({\n      component: TollControlFormPage,\n      componentProps: {\n        tollControl\n      }\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data && data.success) {\n      this.getTollControls();\n    }\n  }\n\n  async presentDeleteTollControlAlertConfirm(tollControl: TollControl) {\n    const alert = await this.alertController.create({\n      header: '¿Desea eliminar registro?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            //\n          }\n        }, {\n          text: 'Sí',\n          handler: () => {\n            this.deleteTollControl(tollControl);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  deleteTollControl(tollControl: TollControl) {\n    this.submitting = true;\n    this.tollControlService.deleteTollControl(tollControl)\n      .subscribe((response: any) => {\n        this.tollControls = this.tollControls.filter(item => item.id !== tollControl.id);\n        this.submitting = false;\n      }, error => {\n        this.submitting = false;\n      });\n  }\n\n  doRefresh(event) {\n    console.log('Begin async operation');\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      this.getTollControls();\n      event.target.complete();\n    }, 2000);\n  }\n\n}\n","<ion-content class=\"ion-padding\">\n  <ion-item lines=\"none\" class=\"custom-date-item\">\n    <ion-datetime displayFormat=\"MMMM YYYY\"\n                  [formControl]=\"dateFC\"\n                  (ionChange)=\"onDateChange($event)\"\n                  display-timezone=\"America/Argentina/Buenos_Aires\"\n                  placeholder=\"Selecciona el mes\"\n                  doneText=\"ok\"\n                  cancelText=\"cancelar\"\n                  monthNames=\"enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, diciembre\"\n                  monthShortNames=\"ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic\"\n                  dayNames=\"domingo, lunes, martes, miércoles, jueves, viernes, sábado, domingo\"\n                  dayShortNames=\"dom, lun, mar, mié, jue, vie, sáb, dom\">\n    </ion-datetime>\n  </ion-item>\n\n  <ion-progress-bar class=\"ion-margin-top\"\n                    type=\"indeterminate\"\n                    *ngIf=\"loading || submitting\">\n  </ion-progress-bar>\n\n  <div class=\"ion-text-center ion-padding-bottom\">\n    <ion-button class=\"custom-button\" (click)=\"addTollControl()\">\n      AGREGAR\n    </ion-button>\n  </div>\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\n    <ion-refresher-content></ion-refresher-content>\n  </ion-refresher>\n\n  <p class=\"ion-padding-horizontal\" *ngIf=\"!loading && tollControls.length <= 0\">\n    <b>No tienes ningún registro para el mes seleccionado</b>\n  </p>\n\n  <ion-item-sliding *ngFor=\"let tollControl of tollControls; let i = index\"\n                    class=\"ion-margin-bottom\">\n    <ion-item lines=\"none\">\n      <ion-grid>\n        <ion-row>\n          <ion-col size=\"7\">\n            <p class=\"ion-no-margin\">Estación  {{tollControl.station}}</p>\n            <p class=\"ion-no-margin\">${{tollControl.total}}</p>\n          </ion-col>\n          <ion-col size=\"5\">\n            <p class=\"ion-no-margin\">\n              <b>{{tollControl.date | date: 'dd/MM/yyyy'}}</b>\n            </p>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-item>\n    <ion-item-options>\n      <ion-item-option color=\"light\" (click)=\"editTollControl(tollControl)\">\n        <ion-icon slot=\"end\" name=\"create\"></ion-icon>\n        Editar\n      </ion-item-option>\n      <ion-item-option color=\"light\" (click)=\"presentDeleteTollControlAlertConfirm(tollControl)\">\n        <ion-icon slot=\"end\" name=\"trash\"></ion-icon>\n        Eliminar\n      </ion-item-option>\n    </ion-item-options>\n  </ion-item-sliding>\n</ion-content>\n\n"],"sourceRoot":"webpack:///"}