{"version":3,"sources":["./src/app/pages/journeys/journey-list/journey-list.page.ts","./src/app/pages/journeys/journey-list/journey-list.page.html","./src/app/pages/journeys/journey-list/journey-list-routing.module.ts","./src/app/pages/journeys/journey-list/journey-list.module.ts"],"names":[],"mappings":"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","file":"pages-journeys-journey-list-journey-list-module-es2015.js","sourcesContent":["import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {FormControl} from '@angular/forms';\nimport {Router} from '@angular/router';\nimport {Geoposition} from '@ionic-native/geolocation';\nimport {Geolocation} from '@ionic-native/geolocation/ngx';\nimport {AlertController, IonReorderGroup, LoadingController, ModalController} from '@ionic/angular';\nimport {Subscription} from 'rxjs';\nimport {ToastComponent} from '../../../components/toast/toast.component';\nimport {DeliveryMapPage} from '../../delivery-map/delivery-map.page';\nimport {JourneyDetailPage} from '../journey-detail/journey-detail.page';\nimport {JourneyFormPage} from '../journey-form/journey-form.page';\nimport {Driver} from '../../../interfaces/Driver';\nimport {Order} from '../../../interfaces/Order';\nimport {DriverService} from '../../../services/v1/driver.service';\nimport {GeolocationService} from '../../../services/v1/geolocation.service';\nimport {LocationService} from '../../../services/v1/location.service';\nimport {OrderService} from '../../../services/v1/order.service';\n\n@Component({\n  selector: 'app-journey-list',\n  templateUrl: './journey-list.page.html',\n  styleUrls: ['./journey-list.page.scss'],\n})\nexport class JourneyListPage implements OnInit, AfterViewInit, OnDestroy {\n  orders: Order[] = [];\n  dateFC = new FormControl();\n  date = new Date();\n  driverPosition: Geoposition;\n  driver: Driver;\n  @ViewChild(IonReorderGroup, {static: true}) reorderGroup: IonReorderGroup;\n  loading = true;\n  optimizingOrders = false;\n  driverSubscription: Subscription;\n\n  constructor(private modalController: ModalController,\n              private locationService: LocationService,\n              private alertController: AlertController,\n              private loadingController: LoadingController,\n              private geolocation: Geolocation,\n              private toastComponent: ToastComponent,\n              private geolocationService: GeolocationService,\n              private driverService: DriverService,\n              private router: Router,\n              private orderService: OrderService) {\n  }\n\n  ngOnInit() {\n    this.driverSubscription = this.driverService.getDriver$()\n      .subscribe(driver => {\n        if (driver) {\n          this.driver = driver;\n        } else {\n          this.driverService.getProfile().subscribe((response: any) => {\n            this.driver = response.driver;\n          });\n        }\n      });\n  }\n\n  ngAfterViewInit() {\n    this.date = new Date();\n    this.dateFC.setValue(this.date.toISOString());\n    this.getOrdersByDate();\n  }\n\n  ngOnDestroy() {\n    if (this.driverSubscription) {\n      this.driverSubscription.unsubscribe();\n    }\n  }\n\n  doReorder(ev: any) {\n    this.swapArrayElement(ev.detail.from, ev.detail.to);\n    ev.detail.complete();\n  }\n\n  swapArrayElement(from: number, to: number) {\n    const temp = this.orders[from];\n    this.orders[from] = this.orders[to];\n    this.orders[to] = temp;\n  }\n\n  async addLocation() {\n    const modal = await this.modalController.create({\n      component: JourneyFormPage\n    });\n    await modal.present();\n    const {data} = await modal.onDidDismiss();\n    if (data?.hasNewOrder) {\n      this.getOrdersByDate();\n    }\n  }\n\n  async viewOrderDetail(order: Order) {\n    const modal = await this.modalController.create({\n      component: JourneyDetailPage,\n      componentProps: {order},\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data?.success) {\n      //\n    }\n  }\n\n  getOrdersByDate() {\n    console.log('getting orders by date...');\n    this.orders = [];\n    this.loading = true;\n    const day = this.date.getDate();\n    const month = this.date.getMonth() + 1;\n    const year = this.date.getFullYear();\n    this.orderService.getOrdersByDate('journey', day, month, year)\n      .subscribe((response: any) => {\n        this.orders = response.orders;\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n      });\n  }\n\n  onDateChange(event) {\n    this.date = new Date(event.detail.value);\n    this.getOrdersByDate();\n  }\n\n  async showMap() {\n    if (this.orders.length <= 0) {\n      const alert = await this.alertController.create({\n        message: 'No tienes paquetes pendientes por entregar',\n        buttons: ['OK']\n      });\n      await alert.present();\n    } else {\n      const modal = await this.modalController.create({\n        component: DeliveryMapPage,\n        componentProps: {orders: this.orders}\n      });\n\n      await modal.present();\n\n      const {data} = await modal.onDidDismiss();\n      this.getOrdersByDate();\n    }\n  }\n\n  checkDriverPosition() {\n    console.log(this.geolocationService.getDriverPosition());\n    this.driverPosition = this.geolocationService.getDriverPosition();\n    if (!(this.driverPosition?.coords?.latitude && this.driverPosition?.coords?.longitude)) {\n      this.geolocationService.getCurrentPosition().then((driverPosition: any) => {\n        this.driverPosition = driverPosition;\n\n        if (!(this.driverPosition?.coords?.latitude && this.driverPosition?.coords?.longitude)) {\n          this.toastComponent.presentToast(\n            `No se pudo obtener ubicación actual. Por favor concede los permisos\n          para que la aplicación pueda utilizar el GPS de su dispositivo móvil`,\n            'middle',\n            3500\n          );\n          return false;\n        } else {\n          return true;\n        }\n      });\n    } else {\n      return true;\n    }\n  }\n\n  checkUndeliveredOrders() {\n    const undeliveredOrders = this.orders.filter(order => order.status !== 'delivered');\n\n    if (undeliveredOrders.length <= 0) {\n      this.toastComponent.presentToast(\n        `No hay paquetes pendientes por entregar`,\n        'middle',\n        3500\n      );\n    }\n\n    return undeliveredOrders;\n  }\n\n\n  async optimizeOrders() {\n    const undeliveredOrders = this.checkUndeliveredOrders();\n\n    let originLat = this.driver?.start_lat;\n    let originLng = this.driver?.start_lng;\n\n    if ((originLat === undefined || originLat === null) || (originLng === undefined || originLng === null)) {\n      if (!this.checkDriverPosition()) {\n        return;\n      }\n      originLat = this.driverPosition?.coords?.latitude;\n      originLng = this.driverPosition?.coords?.longitude;\n    }\n\n    if (undeliveredOrders.length > 0 && originLat !== undefined && originLat !== null && originLng !== undefined && originLng !== null) {\n      const lat = Number(originLat);\n      const lng = Number(originLng);\n      const body = {\n        lat,\n        lng,\n        orders_ids: undeliveredOrders.map(order => order.id),\n      };\n      console.log(body);\n      this.optimizingOrders = true;\n      this.orderService.optimizeOrders(body)\n        .subscribe((response: any) => {\n          this.orders = response.orders;\n          this.optimizingOrders = false;\n          this.toastComponent.presentToast(\n            `Ruta optimizada`,\n            'bottom',\n            3500\n          );\n        }, error => {\n          this.optimizingOrders = false;\n        });\n    } else if (undeliveredOrders.length > 0) {\n      this.toastComponent.presentToast(\n        'No se pudo determinar tu punto de partida. Configúralo en tu perfil o habilita el GPS.',\n        'middle',\n        3500\n      );\n    }\n  }\n\n  async presentDeleteOrderAlertConfirm(order: Order) {\n    const alert = await this.alertController.create({\n      header: '¿Desea eliminar esta ubicación de su hoja de ruta?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            //\n          }\n        }, {\n          text: 'Sí',\n          handler: () => {\n            this.deleteOrder(order);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  deleteOrder(order: Order) {\n    this.orderService.deleteOrder(order)\n      .subscribe((response: any) => {\n        this.getOrdersByDate();\n      });\n  }\n\n  doRefresh(event) {\n    console.log('Begin async operation');\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      this.getOrdersByDate();\n      event.target.complete();\n    }, 2000);\n  }\n}\n","<ion-header>\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-menu-button autoHide=\"false\"></ion-menu-button>\n    </ion-buttons>\n    <ion-title>VIAJES</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-item lines=\"none\" class=\"custom-date-item \">\n    <ion-datetime [formControl]=\"dateFC\"\n                  (ionChange)=\"onDateChange($event)\"\n                  displayFormat=\"DD MMMM YYYY\"\n                  placeholder=\"Seleccione fecha\"\n                  doneText=\"ok\"\n                  cancelText=\"cancelar\"\n                  monthNames=\"enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, diciembre\"\n                  monthShortNames=\"ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic\"\n                  dayNames=\"domingo, lunes, martes, miércoles, jueves, viernes, sábado, domingo\"\n                  dayShortNames=\"dom, lun, mar, mié, jue, vie, sáb, dom\">\n    </ion-datetime>\n  </ion-item>\n\n  <div class=\"ion-text-center ion-padding-bottom\">\n    <ion-button class=\"custom-button\" (click)=\"addLocation()\">\n      AGREGAR\n    </ion-button>\n  </div>\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\n    <ion-refresher-content></ion-refresher-content>\n  </ion-refresher>\n\n  <p *ngIf=\"!loading && orders.length <= 0\" class=\"ion-padding ion-text-center\">\n    <b>No tienes viajes pendientes </b>\n  </p>\n\n  <div class=\"ion-padding ion-text-center\" *ngIf=\"loading\">\n    <ion-progress-bar type=\"indeterminate\"></ion-progress-bar>\n  </div>\n\n  <ion-reorder-group (ionItemReorder)=\"doReorder($event)\" disabled=\"false\">\n    <ion-item-sliding *ngFor=\"let order of orders; let i=index\">\n      <ion-item (click)=\"viewOrderDetail(order)\">\n        <ion-grid>\n          <ion-row>\n            <ion-col size=\"1\">\n              <ion-icon name=\"pin\" color=\"dark\"></ion-icon>\n            </ion-col>\n            <ion-col size=\"9\">\n              {{order.location.name | uppercase}}\n            </ion-col>\n            <ion-col size=\"2\">\n              <ion-badge color=\"primary\">{{i + 1}}</ion-badge>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col>\n              <ion-label class=\"ion-text-wrap\">\n                {{order.location.address | uppercase}}. {{order.location.city | uppercase}}\n              </ion-label>\n            </ion-col>\n          </ion-row>\n          <ion-row>\n            <ion-col>\n              <ion-badge\n                [color]=\"order.status === 'delivered' ? 'primary' : order.status === 'skipped' ? 'warning' : 'danger'\">\n                {{order.status_es | uppercase}}\n              </ion-badge>\n            </ion-col>\n          </ion-row>\n        </ion-grid>\n        <ion-reorder slot=\"end\"></ion-reorder>\n      </ion-item>\n\n      <ion-item-options>\n        <ion-item-option color=\"light\" (click)=\"presentDeleteOrderAlertConfirm(order)\">\n          <ion-icon slot=\"end\" name=\"trash\"></ion-icon>\n          Eliminar\n        </ion-item-option>\n      </ion-item-options>\n    </ion-item-sliding>\n  </ion-reorder-group>\n</ion-content>\n\n<ion-footer>\n  <ion-toolbar>\n    <ion-tabs>\n      <ion-tab-bar slot=\"bottom\" color=\"light\">\n        <ion-tab-button (click)=\"showMap()\">\n          <ion-icon name=\"navigate-circle\"></ion-icon>\n          <ion-label>Comenzar</ion-label>\n        </ion-tab-button>\n\n        <ion-tab-button (click)=\"optimizeOrders()\">\n          <ion-icon name=\"filter\" *ngIf=\"!optimizingOrders\"></ion-icon>\n          <ion-spinner name=\"bubbles\" *ngIf=\"optimizingOrders\"></ion-spinner>\n          <ion-label *ngIf=\"!optimizingOrders\">Optimizar</ion-label>\n          <ion-label *ngIf=\"optimizingOrders\">Optimizando...</ion-label>\n        </ion-tab-button>\n      </ion-tab-bar>\n    </ion-tabs>\n  </ion-toolbar>\n</ion-footer>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { JourneyListPage } from './journey-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: JourneyListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class JourneyListPageRoutingModule {}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {JourneyListPageRoutingModule} from './journey-list-routing.module';\n\nimport {JourneyListPage} from './journey-list.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    JourneyListPageRoutingModule\n  ],\n  declarations: [JourneyListPage]\n})\nexport class JourneyListPageModule {\n}\n"],"sourceRoot":"webpack:///"}