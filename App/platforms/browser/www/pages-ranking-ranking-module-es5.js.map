{"version":3,"sources":["webpack:///src/app/pages/ranking/ranking.module.ts","webpack:///src/app/pages/ranking/ranking-routing.module.ts","webpack:///src/app/pages/ranking/ranking.page.ts","webpack:///src/app/pages/ranking/ranking.page.html"],"names":["RankingPageModule","routes","path","component","RankingPageRoutingModule","forChild","RankingPage","driverService","domSanitizer","drivers","podium","list","loading","ngOnInit","ngAfterViewInit","getRanking","subscribe","response","length","getPodium0DriverProfileImage","getPodium1DriverProfileImage","getPodium2DriverProfileImage","error","driver","getDriverProfileImage","blob","objectURL","URL","createObjectURL","podium0ProfileImage","bypassSecurityTrustUrl","podium1ProfileImage","podium2ProfileImage","doRefresh","event","console","log","setTimeout","target","complete"],"mappings":"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","file":"pages-ranking-ranking-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RankingPageRoutingModule } from './ranking-routing.module';\n\nimport { RankingPage } from './ranking.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RankingPageRoutingModule\n  ],\n  declarations: [RankingPage]\n})\nexport class RankingPageModule {}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { RankingPage } from './ranking.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RankingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RankingPageRoutingModule {}\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {DriverService} from '../../services/v2/driver.service';\nimport {Driver} from '../../interfaces/Driver';\nimport {DomSanitizer} from '@angular/platform-browser';\n\n@Component({\n    selector: 'app-ranking',\n    templateUrl: './ranking.page.html',\n    styleUrls: ['./ranking.page.scss'],\n})\nexport class RankingPage implements OnInit, AfterViewInit {\n    drivers: Driver[] = [];\n    podium: Driver[] = [];\n    list: Driver[] = [];\n    loading = true;\n    podium0ProfileImage: any;\n    podium1ProfileImage: any;\n    podium2ProfileImage: any;\n\n    constructor(private driverService: DriverService,\n                private domSanitizer: DomSanitizer) {\n    }\n\n    ngOnInit(): void {\n        //\n    }\n\n    ngAfterViewInit() {\n        this.getRanking();\n    }\n\n    getRanking() {\n        this.loading = true;\n        this.driverService.getRanking()\n            .subscribe((response: any) => {\n                this.drivers = response.drivers;\n                this.podium = response.podium;\n                this.list = response.list;\n                if (this.podium.length >= 1) {\n                    this.getPodium0DriverProfileImage(this.podium[0]);\n                }\n                if (this.podium.length >= 2) {\n                    this.getPodium1DriverProfileImage(this.podium[1]);\n                }\n                if (this.podium.length >= 3) {\n                    this.getPodium2DriverProfileImage(this.podium[2]);\n                }\n                this.loading = false;\n            }, error => {\n                this.loading = false;\n            });\n    }\n\n    getPodium0DriverProfileImage(driver: Driver) {\n        this.driverService.getDriverProfileImage(driver)\n            .subscribe((blob: any) => {\n                const objectURL = URL.createObjectURL(blob);\n                this.podium0ProfileImage = this.domSanitizer.bypassSecurityTrustUrl(objectURL);\n            });\n    }\n\n    getPodium1DriverProfileImage(driver: Driver) {\n        this.driverService.getDriverProfileImage(driver)\n            .subscribe((blob: any) => {\n                const objectURL = URL.createObjectURL(blob);\n                this.podium1ProfileImage = this.domSanitizer.bypassSecurityTrustUrl(objectURL);\n            });\n    }\n\n    getPodium2DriverProfileImage(driver: Driver) {\n        this.driverService.getDriverProfileImage(driver)\n            .subscribe((blob: any) => {\n                const objectURL = URL.createObjectURL(blob);\n                this.podium2ProfileImage = this.domSanitizer.bypassSecurityTrustUrl(objectURL);\n            });\n    }\n\n  doRefresh(event) {\n    console.log('Begin async operation');\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      this.getRanking();\n      event.target.complete();\n    }, 2000);\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-menu-button autoHide=\"false\"></ion-menu-button>\n    </ion-buttons>\n    <ion-title>RANKING</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content *ngIf=\"!loading\">\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\n    <ion-refresher-content></ion-refresher-content>\n  </ion-refresher>\n\n  <ion-grid>\n    <ion-row>\n      <ion-col size=\"4\" class=\"ion-text-center mt-80\">\n        <img [src]=\"podium1ProfileImage\" alt=\"\" *ngIf=\"podium1ProfileImage\">\n        <img src=\"assets/images/default_profile_img.png\" alt=\"\" *ngIf=\"!podium1ProfileImage\">\n        <div class=\"podium-driver-score\">\n          {{podium[1]?.score}}\n        </div>\n        <p class=\"ion-no-margin driver-podium-name\">\n          {{podium[1]?.full_name}}\n        </p>\n      </ion-col>\n\n      <ion-col size=\"4\" class=\"ion-text-center\">\n        <img src=\"assets/images/crown.png\" alt=\"\" class=\"crown\">\n        <br>\n        <img [src]=\"podium0ProfileImage\" alt=\"\" *ngIf=\"podium0ProfileImage\">\n        <img src=\"assets/images/default_profile_img.png\" alt=\"\" *ngIf=\"!podium0ProfileImage\">\n        <div class=\"podium-driver-score\">\n          {{podium[0]?.score}}\n        </div>\n        <p class=\"ion-no-margin driver-podium-name\">\n          {{podium[0]?.full_name}}\n        </p>\n      </ion-col>\n\n      <ion-col size=\"4\" class=\"ion-text-center mt-80\">\n        <img [src]=\"podium2ProfileImage\" alt=\"\" *ngIf=\"podium2ProfileImage\">\n        <img src=\"assets/images/default_profile_img.png\" alt=\"\" *ngIf=\"!podium2ProfileImage\">\n        <div class=\"podium-driver-score\">\n          {{podium[2]?.score}}\n        </div>\n        <p class=\"ion-no-margin driver-podium-name\">\n          {{podium[2]?.full_name}}\n        </p>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <ion-list lines=\"none\" *ngIf=\"list.length > 0\">\n    <ion-item *ngFor=\"let driver of list; let i=index\"\n              [style.--animation-order]=\"i\">\n      <ion-grid>\n        <ion-row>\n          <ion-col class=\"ion-align-self-center\">\n            <div class=\"driver-name\">\n              {{driver.full_name}}\n            </div>\n          </ion-col>\n          <ion-col size=\"3\" class=\"ion-text-right ion-align-self-center\">\n            <div class=\"driver-score\">\n              {{driver.score}}\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-item>\n  </ion-list>\n</ion-content>\n"]}