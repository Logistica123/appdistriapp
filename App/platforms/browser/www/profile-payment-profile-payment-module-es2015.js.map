{"version":3,"sources":["./src/app/pages/profile/profile-payment/profile-payment.module.ts","./src/app/services/v1/payment-method.service.ts","./src/app/pages/profile/profile-payment/profile-payment-routing.module.ts","./src/app/pages/profile/profile-payment/profile-payment.page.ts","./src/app/pages/profile/profile-payment/profile-payment.page.html"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACF;AAEA;AAEsC;AAEvB;;AAWrD,MAAM,wBAAwB;;gGAAxB,wBAAwB;uGAAxB,wBAAwB;2GAR1B;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,+FAA+B;SAChC;mIAGU,wBAAwB,mBAFpB,wEAAkB,aAL/B,4DAAY;QACZ,0DAAW;QACX,0DAAW;QACX,+FAA+B;;;;;;;;;;;;;ACdnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8D;AACd;AACC;AAET;;;AAKjC,MAAM,oBAAoB;IAK/B,YAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAJpC,YAAO,GAAG,qEAAW,CAAC,OAAO,CAAC;QAC9B,OAAE,GAAG,SAAS,CAAC;QACP,oBAAe,GAAG,IAAI,oDAAe,CAAkB,EAAE,CAAC,CAAC;IAGnE,CAAC;IAED;;iEAE6D;IAC7D,kBAAkB;QAChB,IAAI,IAAI,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;YAC/C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YACvB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,EAAE,iBAAiB,CAAC;iBAC7D,IAAI,CAAC,0DAAG,CAAC,CAAC,QAAa,EAAE,EAAE,CAAC,QAAQ,CAAC,eAAe,CAAC,EACpD,0DAAG,CAAC;gBACF,IAAI,EAAE,GAAG,CAAC,EAAE;oBACV,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;oBACvB,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC;gBAC/B,CAAC;aACF,CAAC,CACH,CAAC;SACL;QACD,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAC3B,OAAO,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;IAC7C,CAAC;IAED,kBAAkB,CAAC,cAA+B;QAChD,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACnC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;IAC5C,CAAC;;wFA/BU,oBAAoB;uGAApB,oBAAoB,WAApB,oBAAoB,mBAFnB,MAAM;;;;;;;;;;;;;ACPpB;AAAA;AAAA;AAAA;AAAA;AAAuD;AAEK;;;AAE5D,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,wEAAkB;KAC9B;CACF,CAAC;AAMK,MAAM,+BAA+B;;8GAA/B,+BAA+B;8GAA/B,+BAA+B;kHAHjC,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,EAC9B,4DAAY;mIAEX,+BAA+B,uFAFhC,4DAAY;;;;;;;;;;;;;ACbxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiF;AAEf;;;;;;;ICFhE,8EACmB;;;;IAKjB,8EAEuC;IACrC,4EAAW;IAAA,uDAAsB;IAAA,4DAAY;IAC7C,kFACsE;IAAxD,wZAAuD;IACrE,4DAAe;IACjB,4DAAW;;;IAJE,0DAAsB;IAAtB,sFAAsB;IACR,0DAA4B;IAA5B,0GAA4B;IAAC,sFAA0B;;ADD/E,MAAM,kBAAkB;IAO7B,YAAoB,oBAA0C,EAC1C,aAA4B;QAD5B,yBAAoB,GAApB,oBAAoB,CAAsB;QAC1C,kBAAa,GAAb,aAAa,CAAe;QAPhD,mBAAc,GAAoB,EAAE,CAAC;QACrC,yBAAoB,GAAoB,EAAE,CAAC;QAC3C,2BAAsB,GAAa,EAAE,CAAC;QACtC,0BAAqB,GAAG,IAAI,CAAC;QAC7B,gCAA2B,GAAG,IAAI,CAAC;IAInC,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,oBAAoB,CAAC,kBAAkB,EAAE;aAC3C,SAAS,CAAC,CAAC,QAAa,EAAE,EAAE;YAC3B,IAAI,CAAC,cAAc,GAAG,QAAQ,CAAC;YAC/B,IAAI,CAAC,uBAAuB,EAAE,CAAC;YAC/B,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACrC,CAAC,EAAE,KAAK,CAAC,EAAE;YACT,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACrC,CAAC,CAAC,CAAC;IACP,CAAC;IAED,uBAAuB;QACrB,IAAI,CAAC,2BAA2B,GAAG,IAAI,CAAC;QACxC,IAAI,CAAC,aAAa,CAAC,iBAAiB,EAAE;aACnC,SAAS,CAAC,CAAC,QAAa,EAAE,EAAE;YAC3B,IAAI,CAAC,oBAAoB,GAAG,QAAQ,CAAC,eAAe,CAAC;YACrD,IAAI,CAAC,cAAc,EAAE,CAAC;QACxB,CAAC,EAAE,KAAK,CAAC,EAAE;YACT,IAAI,CAAC,2BAA2B,GAAG,KAAK,CAAC;QAC3C,CAAC,CAAC,CAAC;IACP,CAAC;IAED,cAAc;QACZ,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE;YAC5C,MAAM,QAAQ,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,GAAG,aAAa,CAAC,EAAE,CAA2B,CAAC;YAC7F,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACtB,IAAI,QAAQ,EAAE;gBACZ,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC;aACzB;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,2BAA2B,GAAG,KAAK,CAAC;IAC3C,CAAC;IAED,kBAAkB,CAAC,EAAE,EAAE,aAA4B;QACjD,IAAI,EAAE,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,EAAE;YACpF,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;SACpD;QAED,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,OAAO,IAAI,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE;YACpF,IAAI,CAAC,sBAAsB,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,aAAa,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SAC9F;QACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;IAC3C,CAAC;IAED,MAAM;QACJ,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QACzC,MAAM,IAAI,GAAG;YACX,mBAAmB,EAAE,IAAI,CAAC,sBAAsB;SACjD,CAAC;QACF,IAAI,CAAC,aAAa,CAAC,oBAAoB,CAAC,IAAI,CAAC;aAC1C,SAAS,CAAC,CAAC,QAAa,EAAE,EAAE;QAE7B,CAAC,CAAC,CAAC;IACP,CAAC;;oFArEU,kBAAkB;kGAAlB,kBAAkB;QCV/B,iFAAiC;QAC/B,wIACmB;QAEnB,+EAEA;QAAA,2EAAU;QACR,wHAOW;QACb,4DAAW;QAEX,yEAAyC;QACvC,gFAAqD;QAAnB,8IAAS,YAAQ,IAAC;QAClD,oEACF;QAAA,4DAAa;QACf,4DAAM;QACR,4DAAc;;QArBO,0DAA0D;QAA1D,8HAA0D;QAMvC,0DAAiB;QAAjB,uFAAiB","file":"profile-payment-profile-payment-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePaymentPageRoutingModule } from './profile-payment-routing.module';\n\nimport { ProfilePaymentPage } from './profile-payment.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePaymentPageRoutingModule\n  ],\n  declarations: [ProfilePaymentPage]\n})\nexport class ProfilePaymentPageModule {}\n","import {Injectable} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {PaymentMethod} from '../../interfaces/PaymentMethod';\nimport {map, tap} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaymentMethodService {\n  API_URL = environment.API_URL;\n  V1 = 'v1/app/';\n  private paymentMethods$ = new BehaviorSubject<PaymentMethod[]>([]);\n\n  constructor(private http: HttpClient) {\n  }\n\n  /***********************************************************\n   * Observables\n   ***********************************************************/\n  getPaymentMethods$(): Observable<PaymentMethod[]> {\n    if (this.paymentMethods$.getValue().length <= 0) {\n      console.log('IS ZERO');\n      return this.http.get(`${this.API_URL}${this.V1}payment-methods`)\n        .pipe(map((response: any) => response.payment_methods),\n          tap({\n            next: val => {\n              console.log('on next');\n              this.setPaymentMethods$(val);\n            }\n          })\n        );\n    }\n    console.log('FROM CACHE!');\n    return this.paymentMethods$.asObservable();\n  }\n\n  setPaymentMethods$(paymentMethods: PaymentMethod[]) {\n    console.log('setting new data...');\n    this.paymentMethods$.next(paymentMethods);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePaymentPage } from './profile-payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePaymentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePaymentPageRoutingModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {PaymentMethodService} from '../../../services/v1/payment-method.service';\nimport {PaymentMethod} from '../../../interfaces/PaymentMethod';\nimport {DriverService} from '../../../services/v1/driver.service';\n\n@Component({\n  selector: 'app-profile-payment',\n  templateUrl: './profile-payment.page.html',\n  styleUrls: ['./profile-payment.page.scss'],\n})\nexport class ProfilePaymentPage implements OnInit {\n  paymentMethods: PaymentMethod[] = [];\n  driverPaymentMethods: PaymentMethod[] = [];\n  selectedPaymentMethods: number[] = [];\n  loadingPaymentMethods = true;\n  loadingDriverPaymentMethods = true;\n\n  constructor(private paymentMethodService: PaymentMethodService,\n              private driverService: DriverService) {\n  }\n\n  ngOnInit() {\n    this.getPaymentMethods();\n  }\n\n  getPaymentMethods() {\n    this.loadingPaymentMethods = true;\n    this.paymentMethodService.getPaymentMethods$()\n      .subscribe((response: any) => {\n        this.paymentMethods = response;\n        this.getDriverPaymentMethods();\n        this.loadingPaymentMethods = false;\n      }, error => {\n        this.loadingPaymentMethods = false;\n      });\n  }\n\n  getDriverPaymentMethods() {\n    this.loadingDriverPaymentMethods = true;\n    this.driverService.getPaymentMethods()\n      .subscribe((response: any) => {\n        this.driverPaymentMethods = response.payment_methods;\n        this.markCheckboxes();\n      }, error => {\n        this.loadingDriverPaymentMethods = false;\n      });\n  }\n\n  markCheckboxes() {\n    this.driverPaymentMethods.map(paymentMethod => {\n      const checkbox = document.getElementById('id-' + paymentMethod.id) as HTMLIonCheckboxElement;\n      console.log(checkbox);\n      if (checkbox) {\n        checkbox.checked = true;\n      }\n    });\n    this.loadingDriverPaymentMethods = false;\n  }\n\n  checkPaymentMethod(ev, paymentMethod: PaymentMethod) {\n    if (ev.detail.checked && this.selectedPaymentMethods.indexOf(paymentMethod.id) <= -1) {\n      this.selectedPaymentMethods.push(paymentMethod.id);\n    }\n\n    if (!ev.detail.checked && this.selectedPaymentMethods.indexOf(paymentMethod.id) > -1) {\n      this.selectedPaymentMethods.splice(this.selectedPaymentMethods.indexOf(paymentMethod.id), 1);\n    }\n    console.log(this.selectedPaymentMethods);\n  }\n\n  submit() {\n    console.log(this.selectedPaymentMethods);\n    const body = {\n      payment_methods_ids: this.selectedPaymentMethods\n    };\n    this.driverService.updatePaymentMethods(body)\n      .subscribe((response: any) => {\n\n      });\n  }\n\n}\n","<ion-content class=\"ion-padding\">\n  <ion-progress-bar *ngIf=\"loadingPaymentMethods || loadingDriverPaymentMethods\">\n  </ion-progress-bar>\n\n  Modalidad de pago:\n\n  <ion-list>\n    <ion-item *ngFor=\"let paymentMethod of paymentMethods\"\n              lines=\"none\"\n              class=\"transparent-ion-item\">\n      <ion-label>{{paymentMethod.name}}</ion-label>\n      <ion-checkbox slot=\"end\" id=\"id-{{paymentMethod.id}}\" [value]=\"paymentMethod.id\"\n                    (ionChange)=\"checkPaymentMethod($event, paymentMethod)\">\n      </ion-checkbox>\n    </ion-item>\n  </ion-list>\n\n  <div class=\"ion-text-center ion-padding\">\n    <ion-button class=\"custom-button\" (click)=\"submit()\">\n      Aceptar\n    </ion-button>\n  </div>\n</ion-content>\n"],"sourceRoot":"webpack:///"}