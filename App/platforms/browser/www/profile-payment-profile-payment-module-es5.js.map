{"version":3,"sources":["webpack:///src/app/pages/profile/profile-payment/profile-payment.module.ts","webpack:///src/app/services/v1/payment-method.service.ts","webpack:///src/app/pages/profile/profile-payment/profile-payment-routing.module.ts","webpack:///src/app/pages/profile/profile-payment/profile-payment.page.ts","webpack:///src/app/pages/profile/profile-payment/profile-payment.page.html"],"names":["ProfilePaymentPageModule","PaymentMethodService","http","API_URL","V1","paymentMethods$","getPaymentMethods$","getValue","length","console","log","get","pipe","response","payment_methods","next","val","setPaymentMethods$","asObservable","paymentMethods","routes","path","component","ProfilePaymentPageRoutingModule","forChild","id","ProfilePaymentPage","paymentMethodService","driverService","driverPaymentMethods","selectedPaymentMethods","loadingPaymentMethods","loadingDriverPaymentMethods","ngOnInit","getPaymentMethods","subscribe","getDriverPaymentMethods","error","markCheckboxes","map","paymentMethod","checkbox","document","getElementById","checked","checkPaymentMethod","ev","detail","indexOf","push","splice","submit","body","payment_methods_ids","updatePaymentMethods"],"mappings":"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","file":"profile-payment-profile-payment-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ProfilePaymentPageRoutingModule } from './profile-payment-routing.module';\n\nimport { ProfilePaymentPage } from './profile-payment.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ProfilePaymentPageRoutingModule\n  ],\n  declarations: [ProfilePaymentPage]\n})\nexport class ProfilePaymentPageModule {}\n","import {Injectable} from '@angular/core';\nimport {environment} from '../../../environments/environment';\nimport {HttpClient} from '@angular/common/http';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {PaymentMethod} from '../../interfaces/PaymentMethod';\nimport {map, tap} from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PaymentMethodService {\n  API_URL = environment.API_URL;\n  V1 = 'v1/app/';\n  private paymentMethods$ = new BehaviorSubject<PaymentMethod[]>([]);\n\n  constructor(private http: HttpClient) {\n  }\n\n  /***********************************************************\n   * Observables\n   ***********************************************************/\n  getPaymentMethods$(): Observable<PaymentMethod[]> {\n    if (this.paymentMethods$.getValue().length <= 0) {\n      console.log('IS ZERO');\n      return this.http.get(`${this.API_URL}${this.V1}payment-methods`)\n        .pipe(map((response: any) => response.payment_methods),\n          tap({\n            next: val => {\n              console.log('on next');\n              this.setPaymentMethods$(val);\n            }\n          })\n        );\n    }\n    console.log('FROM CACHE!');\n    return this.paymentMethods$.asObservable();\n  }\n\n  setPaymentMethods$(paymentMethods: PaymentMethod[]) {\n    console.log('setting new data...');\n    this.paymentMethods$.next(paymentMethods);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ProfilePaymentPage } from './profile-payment.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ProfilePaymentPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ProfilePaymentPageRoutingModule {}\n","import {Component, OnInit} from '@angular/core';\nimport {PaymentMethodService} from '../../../services/v1/payment-method.service';\nimport {PaymentMethod} from '../../../interfaces/PaymentMethod';\nimport {DriverService} from '../../../services/v1/driver.service';\n\n@Component({\n  selector: 'app-profile-payment',\n  templateUrl: './profile-payment.page.html',\n  styleUrls: ['./profile-payment.page.scss'],\n})\nexport class ProfilePaymentPage implements OnInit {\n  paymentMethods: PaymentMethod[] = [];\n  driverPaymentMethods: PaymentMethod[] = [];\n  selectedPaymentMethods: number[] = [];\n  loadingPaymentMethods = true;\n  loadingDriverPaymentMethods = true;\n\n  constructor(private paymentMethodService: PaymentMethodService,\n              private driverService: DriverService) {\n  }\n\n  ngOnInit() {\n    this.getPaymentMethods();\n  }\n\n  getPaymentMethods() {\n    this.loadingPaymentMethods = true;\n    this.paymentMethodService.getPaymentMethods$()\n      .subscribe((response: any) => {\n        this.paymentMethods = response;\n        this.getDriverPaymentMethods();\n        this.loadingPaymentMethods = false;\n      }, error => {\n        this.loadingPaymentMethods = false;\n      });\n  }\n\n  getDriverPaymentMethods() {\n    this.loadingDriverPaymentMethods = true;\n    this.driverService.getPaymentMethods()\n      .subscribe((response: any) => {\n        this.driverPaymentMethods = response.payment_methods;\n        this.markCheckboxes();\n      }, error => {\n        this.loadingDriverPaymentMethods = false;\n      });\n  }\n\n  markCheckboxes() {\n    this.driverPaymentMethods.map(paymentMethod => {\n      const checkbox = document.getElementById('id-' + paymentMethod.id) as HTMLIonCheckboxElement;\n      console.log(checkbox);\n      if (checkbox) {\n        checkbox.checked = true;\n      }\n    });\n    this.loadingDriverPaymentMethods = false;\n  }\n\n  checkPaymentMethod(ev, paymentMethod: PaymentMethod) {\n    if (ev.detail.checked && this.selectedPaymentMethods.indexOf(paymentMethod.id) <= -1) {\n      this.selectedPaymentMethods.push(paymentMethod.id);\n    }\n\n    if (!ev.detail.checked && this.selectedPaymentMethods.indexOf(paymentMethod.id) > -1) {\n      this.selectedPaymentMethods.splice(this.selectedPaymentMethods.indexOf(paymentMethod.id), 1);\n    }\n    console.log(this.selectedPaymentMethods);\n  }\n\n  submit() {\n    console.log(this.selectedPaymentMethods);\n    const body = {\n      payment_methods_ids: this.selectedPaymentMethods\n    };\n    this.driverService.updatePaymentMethods(body)\n      .subscribe((response: any) => {\n\n      });\n  }\n\n}\n","<ion-content class=\"ion-padding\">\n  <ion-progress-bar *ngIf=\"loadingPaymentMethods || loadingDriverPaymentMethods\">\n  </ion-progress-bar>\n\n  Modalidad de pago:\n\n  <ion-list>\n    <ion-item *ngFor=\"let paymentMethod of paymentMethods\"\n              lines=\"none\"\n              class=\"transparent-ion-item\">\n      <ion-label>{{paymentMethod.name}}</ion-label>\n      <ion-checkbox slot=\"end\" id=\"id-{{paymentMethod.id}}\" [value]=\"paymentMethod.id\"\n                    (ionChange)=\"checkPaymentMethod($event, paymentMethod)\">\n      </ion-checkbox>\n    </ion-item>\n  </ion-list>\n\n  <div class=\"ion-text-center ion-padding\">\n    <ion-button class=\"custom-button\" (click)=\"submit()\">\n      Aceptar\n    </ion-button>\n  </div>\n</ion-content>\n"]}