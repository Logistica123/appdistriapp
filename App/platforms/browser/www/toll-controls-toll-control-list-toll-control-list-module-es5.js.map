{"version":3,"sources":["webpack:///src/app/pages/controls/toll-controls/toll-control-list/toll-control-list-routing.module.ts","webpack:///src/app/pages/controls/toll-controls/toll-control-list/toll-control-list.module.ts","webpack:///src/app/pages/controls/toll-controls/toll-control-list/toll-control-list.page.html","webpack:///src/app/pages/controls/toll-controls/toll-control-list/toll-control-list.page.ts"],"names":["routes","path","component","TollControlListPageRoutingModule","forChild","TollControlListPageModule","TollControlListPage","modalController","alertController","tollControlService","loading","submitting","tollControls","date","Date","dateFC","ngOnInit","ngAfterViewInit","setValue","toISOString","getTollControls","onDateChange","event","detail","value","month","getMonth","year","getFullYear","subscribe","response","toll_controls","error","addTollControl","create","modal","present","onWillDismiss","data","success","editTollControl","tollControl","componentProps","presentDeleteTollControlAlertConfirm","header","buttons","text","role","cssClass","handler","deleteTollControl","alert","filter","item","id","doRefresh","console","log","setTimeout","target","complete"],"mappings":"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","file":"toll-controls-toll-control-list-toll-control-list-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TollControlListPage } from './toll-control-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TollControlListPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TollControlListPageRoutingModule {}\n","import {NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\n\nimport {IonicModule} from '@ionic/angular';\n\nimport {TollControlListPageRoutingModule} from './toll-control-list-routing.module';\n\nimport {TollControlListPage} from './toll-control-list.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    TollControlListPageRoutingModule\n  ],\n  declarations: [TollControlListPage]\n})\nexport class TollControlListPageModule {\n}\n","<ion-content class=\"ion-padding\">\n  <ion-item lines=\"none\" class=\"custom-date-item\">\n    <ion-datetime displayFormat=\"MMMM YYYY\"\n                  [formControl]=\"dateFC\"\n                  (ionChange)=\"onDateChange($event)\"\n                  display-timezone=\"America/Argentina/Buenos_Aires\"\n                  placeholder=\"Selecciona el mes\"\n                  doneText=\"ok\"\n                  cancelText=\"cancelar\"\n                  monthNames=\"enero, febrero, marzo, abril, mayo, junio, julio, agosto, septiembre, octubre, noviembre, diciembre\"\n                  monthShortNames=\"ene, feb, mar, abr, may, jun, jul, ago, sep, oct, nov, dic\"\n                  dayNames=\"domingo, lunes, martes, miércoles, jueves, viernes, sábado, domingo\"\n                  dayShortNames=\"dom, lun, mar, mié, jue, vie, sáb, dom\">\n    </ion-datetime>\n  </ion-item>\n\n  <ion-progress-bar class=\"ion-margin-top\"\n                    type=\"indeterminate\"\n                    *ngIf=\"loading || submitting\">\n  </ion-progress-bar>\n\n  <div class=\"ion-text-center ion-padding-bottom\">\n    <ion-button class=\"custom-button\" (click)=\"addTollControl()\">\n      AGREGAR\n    </ion-button>\n  </div>\n\n  <ion-refresher slot=\"fixed\" (ionRefresh)=\"doRefresh($event)\">\n    <ion-refresher-content></ion-refresher-content>\n  </ion-refresher>\n\n  <p class=\"ion-padding-horizontal\" *ngIf=\"!loading && tollControls.length <= 0\">\n    <b>No tienes ningún registro para el mes seleccionado</b>\n  </p>\n\n  <ion-item-sliding *ngFor=\"let tollControl of tollControls; let i = index\"\n                    class=\"ion-margin-bottom\">\n    <ion-item lines=\"none\">\n      <ion-grid>\n        <ion-row>\n          <ion-col size=\"7\">\n            <p class=\"ion-no-margin\">Estación  {{tollControl.station}}</p>\n            <p class=\"ion-no-margin\">${{tollControl.total}}</p>\n          </ion-col>\n          <ion-col size=\"5\">\n            <p class=\"ion-no-margin\">\n              <b>{{tollControl.date | date: 'dd/MM/yyyy'}}</b>\n            </p>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n    </ion-item>\n    <ion-item-options>\n      <ion-item-option color=\"light\" (click)=\"editTollControl(tollControl)\">\n        <ion-icon slot=\"end\" name=\"create\"></ion-icon>\n        Editar\n      </ion-item-option>\n      <ion-item-option color=\"light\" (click)=\"presentDeleteTollControlAlertConfirm(tollControl)\">\n        <ion-icon slot=\"end\" name=\"trash\"></ion-icon>\n        Eliminar\n      </ion-item-option>\n    </ion-item-options>\n  </ion-item-sliding>\n</ion-content>\n\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\nimport {AlertController, ModalController} from '@ionic/angular';\nimport {TollControlService} from '../../../../services/v1/toll-control.service';\nimport {TollControl} from '../../../../interfaces/TollControl';\nimport {TollControlFormPage} from '../toll-control-form/toll-control-form.page';\nimport {FormControl} from '@angular/forms';\n\n@Component({\n  selector: 'app-toll-control-list',\n  templateUrl: './toll-control-list.page.html',\n  styleUrls: ['./toll-control-list.page.scss'],\n})\nexport class TollControlListPage implements OnInit, AfterViewInit {\n  loading = true;\n  submitting = false;\n  tollControls: TollControl[] = [];\n  date = new Date();\n  dateFC = new FormControl();\n\n  constructor(private modalController: ModalController,\n              private alertController: AlertController,\n              private tollControlService: TollControlService) {\n  }\n\n  ngOnInit() {\n    //\n  }\n\n  ngAfterViewInit() {\n    this.date = new Date();\n    this.dateFC.setValue(this.date.toISOString());\n    this.getTollControls();\n  }\n\n  onDateChange(event) {\n    this.date = new Date(event.detail.value);\n    this.getTollControls();\n  }\n\n  getTollControls() {\n    this.loading = true;\n    const month = this.date.getMonth() + 1;\n    const year = this.date.getFullYear();\n    this.tollControlService.getTollControls(month, year)\n      .subscribe((response: any) => {\n        this.tollControls = response.toll_controls;\n        this.loading = false;\n      }, error => {\n        this.loading = false;\n      });\n  }\n\n  async addTollControl() {\n    const modal = await this.modalController.create({\n      component: TollControlFormPage,\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data && data.success) {\n      this.getTollControls();\n    }\n  }\n\n  async editTollControl(tollControl: TollControl) {\n    const modal = await this.modalController.create({\n      component: TollControlFormPage,\n      componentProps: {\n        tollControl\n      }\n    });\n    await modal.present();\n    const {data} = await modal.onWillDismiss();\n    if (data && data.success) {\n      this.getTollControls();\n    }\n  }\n\n  async presentDeleteTollControlAlertConfirm(tollControl: TollControl) {\n    const alert = await this.alertController.create({\n      header: '¿Desea eliminar registro?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          cssClass: 'secondary',\n          handler: () => {\n            //\n          }\n        }, {\n          text: 'Sí',\n          handler: () => {\n            this.deleteTollControl(tollControl);\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  deleteTollControl(tollControl: TollControl) {\n    this.submitting = true;\n    this.tollControlService.deleteTollControl(tollControl)\n      .subscribe((response: any) => {\n        this.tollControls = this.tollControls.filter(item => item.id !== tollControl.id);\n        this.submitting = false;\n      }, error => {\n        this.submitting = false;\n      });\n  }\n\n  doRefresh(event) {\n    console.log('Begin async operation');\n\n    setTimeout(() => {\n      console.log('Async operation has ended');\n      this.getTollControls();\n      event.target.complete();\n    }, 2000);\n  }\n\n}\n"]}